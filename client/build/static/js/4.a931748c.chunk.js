(window.webpackJsonp=window.webpackJsonp||[]).push([[4],Array(88).concat([function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(5),c=a(92),i=a.n(c);t.a=function(e){var t="paragraph";e.thin?t="paraThin":e.flat&&(t="flat");var a="";return a=e.direction?i.a[Object(o.a)(t,e.direction)]:i.a[t],r.a.createElement("div",{className:a},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(93),c=a.n(o);t.a=function(e){var t="";return e.step?t=c.a.step:e.back?t=c.a.back:e.wide?t=c.a.wide:e.narrow&&(t=c.a.narrow),r.a.createElement("section",{className:t},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(5),c=a(94),i=a.n(c);t.a=function(e){var t=i.a[Object(o.a)("line",e.direction)];return e.thin?t=i.a[Object(o.a)("thin",e.direction)]:e.flat&&(t=i.a[Object(o.a)("flat",e.direction)]),r.a.createElement("div",{className:t},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(109),c=a.n(o);t.a=function(e){return r.a.createElement("div",{className:e.padded?c.a.padded:c.a.content},e.children)}},function(e,t,a){e.exports={paragraph:"Paragraph_paragraph__3Syr1",paragraphRTL:"Paragraph_paragraphRTL__1QixD",paraThinRTL:"Paragraph_paraThinRTL__MbUoL",flatRTL:"Paragraph_flatRTL__2Wrf9",paraThin:"Paragraph_paraThin__3MveS",flat:"Paragraph_flat__1ADWb"}},function(e,t,a){e.exports={step:"Section_step__2Z-m0",back:"Section_back__28i7v",wide:"Section_wide__2N-Dl",narrow:"Section_narrow__3LTjk"}},function(e,t,a){e.exports={"line-template":"Line_line-template__10CJ2",line:"Line_line__3JP9h",thin:"Line_thin__3xGw8",thinRTL:"Line_thinRTL__RhqQo",lineRTL:"Line_lineRTL__1gIVi",flat:"Line_flat__QIoDb",flatRTL:"Line_flatRTL__2J-nY"}},,function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e,t,a){var n=function(e,t){var a=[];return e.map(function(e){a.push({value:e._id,label:e[t]})}),a}(e,t),r="";return n.forEach(function(e){return e.value===a?r=e.label:null}),r}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(13),c=a(106),i=a.n(c);t.a=function(e){return r.a.createElement("p",{className:"rtl"===e.direction?i.a.votersRight:i.a.voters},r.a.createElement("span",{className:i.a.icon}," ",o.f),r.a.createElement("span",{className:i.a.number},e.number.toLocaleString()," "),r.a.createElement("span",{className:i.a.text},e.text))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(107),c=a.n(o);t.a=function(e){return r.a.createElement("h5",{id:"category",className:c.a.category},e.category)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(110),c=a.n(o);t.a=function(e){return r.a.createElement("img",{src:e.src,className:c.a.photo})}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(13),c=a(111),i=a.n(c);t.a=function(e){var t;return e.primary?t=r.a.createElement(o.b,{primary:!0}):e.secondary&&(t=r.a.createElement(o.b,{secondary:!0})),r.a.createElement("div",{className:i.a.link},t,r.a.createElement("p",null,e.text))}},function(e,t,a){"use strict";var n=a(14),r=n;t.a=function(e,t,a){var o=new Date(Date.parse(e));if(!e&&!t||""===e||""===t||"Invalid Date"===o.toString())return"";if(a){var c=o.getMonth()+1,i=c<10?"0".concat(c):c;return"".concat(o.getDate(),"/").concat(i,"/").concat(o.getFullYear())}var l=Object.keys(n.language).includes(t)?t:"en";return"".concat(function(e,t){return r.language[e].months[t]}(l,o.getMonth())," ").concat(o.getDate(),", ").concat(o.getFullYear())}},function(e,t,a){e.exports={post:"Post_post__3Xz8N",text:"Post_text__1WYKA",textClosed:"Post_textClosed__27orF"}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(115),c=a.n(o);t.a=function(e){var t=c.a.block;return e.border?t=c.a.border:e.rectangle&&(t=c.a.borderRectangle),r.a.createElement("div",{className:t},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(88),c=function(e){return r.a.createElement(o.a,{direction:e.direction},e.text)},i=function(e){return r.a.createElement(o.a,{direction:e.direction},e.text)},l=a(89),s=a(90);t.a=function(e){var t=e.direction,a=e.title?r.a.createElement(s.a,{flat:!0,direction:e.direction},r.a.createElement("h4",null,e.title)):null,n=e.back?r.a.createElement(c,{text:e.text,direction:t}):r.a.createElement(i,{text:e.text,direction:t}),o=r.a.createElement("div",null);return e.step?o=r.a.createElement(l.a,{step:!0},a,n):e.back?o=r.a.createElement(l.a,{back:!0},a,n):e.muni&&(o=r.a.createElement(l.a,{step:!0},a,n)),o}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=function(e){var t=new Date,a=new Date(e),n=Math.round((t-a)/1e3/60/60/24);return n},c=a(108),i=a.n(c);t.a=function(e){var t=o(e.date),a={age:i.a.age,text:i.a.text};return"rtl"===e.direction&&(a.age=i.a.ageR),r.a.createElement("p",{className:a.age},t.toLocaleString(),r.a.createElement("span",{className:a.text},1===t?e.text[0]:e.text[1]))}},function(e,t,a){e.exports={voters:"Voters_voters__qwL-j",votersRight:"Voters_votersRight__3Xop3",icon:"Voters_icon__R74bR",number:"Voters_number__p5bx1",text:"Voters_text__3xYRY"}},function(e,t,a){e.exports={category:"Category_category__2ASm0"}},function(e,t,a){e.exports={age:"Age_age__2I5ab",ageR:"Age_ageR__3RzVm",text:"Age_text__1n_8g"}},function(e,t,a){e.exports={content:"Content_content__1BtMs",padded:"Content_padded__1NnnH"}},function(e,t,a){e.exports={photo:"Photo_photo__2vYxg"}},function(e,t,a){e.exports={link:"Link_link__2TmV6"}},function(e,t,a){e.exports={title:"TopBlock_title__2ePM7"}},function(e,t,a){e.exports={text:"ShowMore_text__3GDrI",closed:"ShowMore_closed__2ioyH",more:"ShowMore_more__3g2xa",open:"ShowMore_open__2Op22",openRTL:"ShowMore_openRTL__OswZr",closedRTL:"ShowMore_closedRTL__1BeAK",less:"ShowMore_less__1u7zV"}},function(e,t,a){e.exports={numbers:"NumbersLine_numbers__3GMx3",numbersRTL:"NumbersLine_numbersRTL__3y9dc",date:"NumbersLine_date__I2P0Z"}},function(e,t,a){e.exports={block:"Block_block__25D3U",border:"Block_border__3jZ4R",borderRectangle:"Block_borderRectangle__bDkgw"}},,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(119),c=a.n(o);t.a=function(e){return r.a.createElement("h2",{className:"rtl"===e.direction?c.a.titleR:c.a.title},e.title)}},function(e,t,a){e.exports={title:"SubTitle_title__2Xfou",titleR:"SubTitle_titleR__3z-AB"}},,function(e,t,a){"use strict";var n=a(8),r=a(0),o=a.n(r),c=a(3),i=a(96),l=a(99),s=a(100),u=a(104),p=a(98),m=a(89),_=a(112),d=a.n(_),f=function(e){return o.a.createElement(m.a,{narrow:!0},o.a.createElement(p.a,{category:e.category}),o.a.createElement("h3",{className:d.a.title},e.title),e.numbersLine)},g=a(5),b=a(13),v=a(113),h=a.n(v),E=function(e){var t=e.opened?"open":"closed",a=h.a[Object(g.a)(t,e.direction)];return o.a.createElement("div",{className:a},o.a.createElement("button",{onClick:function(){return e.action(!e.opened)}},o.a.createElement("span",{className:h.a.more},e.title.more),o.a.createElement("span",{className:h.a.less},e.title.less),o.a.createElement(b.a,{primary:!0})))},x=a(101),w=a(105),y=a(97),k=a(26),R=a(114),T=a.n(R),L=function(e){var t=o.a.createElement("div",{className:T.a.date},Object(x.a)(e.date,"en",!0));return o.a.createElement("div",{className:T.a.numbers},t,o.a.createElement(k.a,null),o.a.createElement(w.a,{date:e.date,text:e.daysText,direction:e.direction}),o.a.createElement(k.a,null),o.a.createElement(y.a,{number:e.votes,text:e.voterText,direction:e.direction}))},S=a(102),O=a.n(S);t.a=Object(c.b)(function(e){return{language:e.language,location:e.locationData}},{})(function(e){var t=e.location.categories,a=e.post,r=a._id,c=a.title,p=a.photo,m=a.link,_=a.problem,d=a.solution,g=a.votes,b=a.date,v=e.language,h=v.direction,x=v.text,w=v.short,y=o.a.useState(!1),k=Object(n.a)(y,2),R=k[0],T=k[1],S=R?O.a.text:O.a.textClosed,N=1===g.length?x["post.voter"]:x["post.voters"],j=Object(i.a)(t,w,e.post.category),D={more:x["post.show-more"],less:x["post.show-less"]},M=o.a.createElement(L,{date:b,daysText:[x["post.age.day"],x["post.age.days"]],direction:h,votes:g.length,voterText:N});return o.a.createElement("div",{"data-testid":"post__view",id:r,className:O.a.post},o.a.createElement(f,{category:j,title:c,numbersLine:M}),o.a.createElement(l.a,{src:p}),o.a.createElement(s.a,{primary:!0,text:m,direction:h}),o.a.createElement("div",{className:S},o.a.createElement(u.a,{step:!0,title:x["post.problem"],text:_,direction:h}),o.a.createElement(u.a,{back:!0,title:x["post.solution"],text:d,direction:h})),o.a.createElement(E,{title:D,direction:h,opened:R,action:T}))})},,,,,,,,,,function(e,t,a){e.exports={image:"PhotoUpload_image__2Zabf",imageDef:"PhotoUpload_imageDef__2JDPm",input:"PhotoUpload_input__1piRJ"}},function(e,t,a){e.exports={step:"Step_step__2Ob0-",filled:"Step_filled__1vPZN"}},function(e,t,a){e.exports={"line-template":"Steps_line-template__1pr6S",line:"Steps_line__3O_Uu",lineRTL:"Steps_lineRTL__3yzCh"}},function(e,t,a){e.exports={message:"Message_message__1Ow9o",messageRTL:"Message_messageRTL__3vHmD",messageForm:"Message_messageForm__2lKkb",messageFormRTL:"Message_messageFormRTL__34syT",attention:"Message_attention__3IUqP",cancel:"Message_cancel__2CF6p",primary:"Message_primary__1iLkV",secondary:"Message_secondary__1TENZ"}},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a(3),i=a(10),l=a.n(i),s=a(17),u=a(34),p=a(7),m=a.n(p),_=a(1),d=a(16),f=a(121),g=a(27),b=a(41),v=a(103),h=a(18),E=a.n(h),x=a(131),w=a.n(x),y=function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],i=function(t){!function(e,t){var a=new FileReader;a.readAsDataURL(e),a.onloadend=function(){t(a.result)}}(t.target.files[0],function(t){var a=function(e){for(var t=e.split(";base64,"),a=t[0].split(":")[1],n=window.atob(t[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return URL.createObjectURL(new Blob([r],{type:a}))}(t);c(a),e.action(t)})},l=n?r.a.createElement("img",{src:n,alt:"upload-image",className:w.a.image}):r.a.createElement("img",{src:"https://res.cloudinary.com/diciu4xpu/image/upload/v1560088174/dev/photo.svg",alt:"upload-image",className:w.a.imageDef});return r.a.createElement(v.a,{border:!0},l,r.a.createElement("input",{id:"file",type:"file",name:"file",className:w.a.input,onChange:function(e){return i(e)}}),r.a.createElement("label",{htmlFor:"file",className:E.a.primarySmall},e.label))},k=a(132),R=a.n(k),T=function(e){var t=e.current<e.step+1?R.a.step:R.a.filled;return r.a.createElement("div",{"data-testid":"step-icon",className:t,onClick:function(){return e.action(e.step)}},e.step)},L=a(133),S=a.n(L),O=a(5),N=function(e){var t=S.a[Object(O.a)("line",e.direction)];return r.a.createElement("section",{className:t},[1,2,3,4,5].map(function(t){return r.a.createElement(T,{key:t,step:t,current:e.current,action:e.action})}))},j=a(134),D=a.n(j),M=function(e){var t=D.a,a=e.use?e.use[0].toUpperCase()+e.use.slice(1):"",n=t[Object(O.a)("message".concat(a),e.direction)],o=t[e.mode];return r.a.createElement("div",{className:n},r.a.createElement("span",{className:o},e.children))},P=a(91),A=function(e){return r.a.createElement(P.a,{padded:!0},e.stepOne,e.stepTwo,e.stepThree,e.stepFour,e.stepFive,e.preview,r.a.createElement(M,{direction:e.direction,mode:"attention",use:"form"},e.message),e.loadingElement)},C=a(42),F=a(40),U=a(32),B=a(89),V=a(88),I=a(118),Z=a(26),z=Object(c.b)(function(e){return{language:e.language,locationData:e.locationData,token:e.token,submitResult:e.submitPost,step:e.step}},{setStep:u.b,submitPost:function(e){return console.log(e),function(){var t=Object(d.a)(m.a.mark(function t(a){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l.a.post("/post/create",e).then(function(e){a({type:"SUBMIT_POST",payload:Object(_.a)({},e.data,{code:e.status})})}).catch(function(e){var t=e.response?e.response.data:e.toString();a({type:"SUBMIT_POST",payload:t})});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(function(e){var t=e.language.direction,a=e.language.text,n=r.a.useState(e.step),c=Object(o.a)(n,2),i=c[0],u=c[1],p=r.a.useState(!1),m=Object(o.a)(p,2),_=m[0],d=m[1],v=r.a.useState(!1),h=Object(o.a)(v,2),E=h[0],x=h[1],w=r.a.useState(""),k=Object(o.a)(w,2),R=k[0],T=k[1],L=r.a.useState(e.locationData.categories[0][e.language.short]),S=Object(o.a)(L,2),O=S[0],j=S[1],D=r.a.useState(""),M=Object(o.a)(D,2),z=M[0],J=M[1],Y=r.a.useState(""),q=Object(o.a)(Y,2),G=q[0],H=q[1],K=r.a.useState(""),Q=Object(o.a)(K,2),W=Q[0],X=Q[1],$=r.a.useState(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useState(""),re=Object(o.a)(ne,2),oe=re[0],ce=re[1];r.a.useEffect(function(){6===i&&!1===_&&d(!0)},[i]);var ie=function(e){switch(ce(""),e.target.name){case"title":T(e.target.value);break;case"problem":J(e.target.value);break;case"solution":H(e.target.value);break;case"link":ae(e.target.value)}},le=a["new.steps.title"],se=r.a.createElement(N,{current:i,direction:t,action:function(e){_&&u(e)}}),ue=r.a.createElement(g.a,{mode:"primary",action:function(){if(i+1<=6){var e=!0,t=a["new.message.fieldEmpty"];switch(i){case 1:e=""!==R;break;case 2:e=""!==O;break;case 3:e=""!==z;break;case 4:e=""!==G;break;case 5:te&&((e=new RegExp("^([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?").test(te))||(t=a["new.message.urlMalformed"]))}e?(ce(""),u(i+1)):ce(t)}}},a["new.steps.button.next"]);6===i&&(se=r.a.createElement(Z.c,null),le=a["new.preview"],ue=r.a.createElement(g.a,{mode:"primary",action:function(){var t={user:e.locationData._id,location:e.locationData.location,token:e.token,post:{title:R,category:O,problem:z,solution:G,photo:W,link:te}};l.a.post("/post/create",t).then(function(e){x(!1),ce(e.data.message)}).catch(function(e){e.response?e.response.data:e.toString()}),x(!0)}},a["new.steps.button.submit"]));var pe=1===i?Object(s.a)({label:a["new.field.title.label"],type:"text",name:"title",value:R,placeholder:a["new.field.title.prompt"],action:ie,length:2,focus:!0}):null,me=2===i?Object(s.b)({list:function(){var t=[];return e.locationData.categories.map(function(a){var n=Object.keys(a).includes(e.language.short)?e.language.short:"en";t.push({value:a._id,label:a[n]})}),t}(),direction:t,label:a["new.field.category.label"],action:function(e){j(e.target.value)},focus:!0}):null,_e=3===i?Object(s.a)({label:a["new.field.problem.label"],type:"textarea",name:"problem",value:z,placeholder:a["new.field.problem.prompt"],action:ie,length:50,focus:!0}):null,de=4===i?Object(s.a)({label:a["new.field.solution.label"],type:"textarea",name:"solution",value:G,placeholder:a["new.field.solution.prompt"],action:ie,length:50,focus:!0}):null,fe=5===i?r.a.createElement(B.a,null,r.a.createElement(U.a,{direction:t,value:a["new.field.photo.label"]}),r.a.createElement(y,{label:a["new.field.photo.prompt"],direction:t,action:function(e){X(e)}}),Object(s.a)({label:a["new.field.link.label"],type:"url",name:"link",value:te,placeholder:a["new.field.link.prompt"],action:ie,length:5})):null,ge=6===i?r.a.createElement(f.a,{preview:!0,post:{title:R,category:O,problem:z,solution:G,photo:W,link:te,_id:"",createdBy:"",date:"",status:"",votes:[]}}):null,be=E?r.a.createElement(b.a,null):null;return r.a.createElement(P.a,{padded:!0},r.a.createElement(F.a,null,r.a.createElement(I.a,{title:le,direction:t}),se),r.a.createElement(V.a,{direction:t},a["new.steps.step.1"]),r.a.createElement(A,{stepOne:pe,stepTwo:me,stepThree:_e,stepFour:de,stepFive:fe,preview:ge,loadingElement:be,direction:t,message:oe}),r.a.createElement(C.a,{row:!0,direction:t},ue,r.a.createElement(g.a,{mode:"secondary",disabled:1===i,action:function(){i-1>0&&u(i-1)}},a["new.steps.button.back"])))}),J=a(21);t.default=function(){return r.a.createElement(J.a,{opposite:!0},r.a.createElement(z,null))}}])]);
//# sourceMappingURL=4.a931748c.chunk.js.map