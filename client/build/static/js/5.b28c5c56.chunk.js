(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{119:function(e,t,a){"use strict";var n=a(0),o=a.n(n),c=a(120),l=a.n(c);t.a=function(e){var t=l.a.block;return e.border?t=l.a.border:e.rectangle&&(t=l.a.borderRectangle),o.a.createElement("div",{className:t},e.children)}},120:function(e,t,a){e.exports={block:"Block_block__25D3U",border:"Block_border__3jZ4R",borderRectangle:"Block_borderRectangle__bDkgw"}},153:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(7),l=a(1);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=a(12),s=a(6),u=a.n(s),d=a(93),m=a(16),p=a(3),b=a(23),f=a(96),h=a(87),g=a(112),v=a(114),y=a(109),_=a(86),E=a(117),j=a.n(E),O=a(10),w=a(27),x=Object(c.b)(function(e){return{language:e.language,location:e.locationData,post:e.posts.filter(function(t){return t._id===e.post._id})[0],mode:e.mode,prevModule:e.prevModule,token:e.token}},{vote:p.o,updatePost:b.d,setModule:p.l,fetchData:p.b,getPosts:p.d,deletePost:b.a,showPost:b.b})(function(e){var t=e.location.categories,a=e.language,c=a.direction,s=a.text,p=a.short,b=Object(n.useState)(!1),E=Object(r.a)(b,2),x=E[0],k=E[1],N=Object(n.useState)(!1),R=Object(r.a)(N,2),T=R[0],S=R[1],L=Object(n.useState)(!1),M=Object(r.a)(L,2),D=M[0],C=M[1],P=Object(n.useState)(e.post.reply.text),B=Object(r.a)(P,2),H=B[0],A=B[1],U=Object(n.useState)(!1),q=Object(r.a)(U,2),V=q[0],F=q[1],K=Object(n.useState)(e.post),W=Object(r.a)(K,2),X=W[0],z=W[1],I=Object(n.useState)(!1),J=Object(r.a)(I,2),Q=J[0],Z=J[1],Y=Object(n.useState)(!1),G=Object(r.a)(Y,2),$=G[0],ee=G[1],te=Object(n.useState)(!1),ae=Object(r.a)(te,2),ne=ae[0],oe=ae[1],ce=Object(n.useState)(!1),le=Object(r.a)(ce,2),ie=le[0],re=le[1],se=Object(n.useState)(!1),ue=Object(r.a)(se,2),de=ue[0],me=ue[1],pe=Object(n.useState)(!1),be=Object(r.a)(pe,2),fe=be[0],he=be[1],ge=X._id,ve=X.title,ye=X.photo,_e=X.link,Ee=X.problem,je=X.solution,Oe=X.votes,we=X.createdBy,xe=X.date,ke=X.reply,Ne=x?j.a.text:j.a.textClosed,Re=1===Oe.length?s["post.voter"]:s["post.voters"],Te=Object(d.a)(t,p,e.post.category),Se={more:s["post.show-more"],less:s["post.show-less"]},Le=Oe.includes(e.location._id),Me=we===e.location._id,De="muni"===e.location.type,Ce=!1;X.reply.up||X.reply.down?X.reply.up.length>0&&X.reply.down.length>0?Ce=[].concat(i(X.reply.up),i(X.reply.down)).includes(e.location._id):X.reply.up.length>0?Ce=X.reply.up.includes(e.location._id):X.reply.down.length>0&&(Ce=X.reply.down.includes(e.location._id)):Ce=!0;var Pe=function(){Z(!Q)},Be=function(){oe(!ne)},He=function(){ee(!$)},Ae=function(){re(!ie)},Ue=function(){me(!de)},qe=function(){he(!fe)},Ve=function(){H&&(e.updatePost(Object(l.a)({},X,{reply:{text:H,date:new Date}})),F(!1),e.getPosts(e.location.location))},Fe=function(){C(!D);var t="/post/".concat(ge,"/vote?user=").concat(e.location._id);u()({method:"patch",url:t}).then(function(t){z(Object(l.a)({},X,{votes:[].concat(i(X.votes),[e.location._id])})),e.getPosts(e.location.location)}).catch(function(e){return console.log(e)})},Ke=s["post.age"],We=o.a.createElement(v.g,{date:xe,daysText:Ke,direction:c,votes:Oe.length,voterText:Re}),Xe=D?o.a.createElement(v.d,{close:Fe,text:s["vote.thanks"]}):null,ze=Le||Me||De?null:o.a.createElement("div",{className:j.a.voteButton,onClick:function(){return Fe()}},o.a.createElement(f.a,null));Oe.includes(e.location._id)&&(ze=o.a.createElement(v.m,{text:s["post.voted"],direction:c}));var Ie,Je="",Qe="",Ze=De&&!ke.text?o.a.createElement(v.f,{action:function(){F(!V)}}):null;if(ke){var Ye=function(e,t){var a=e.up?e.up.length:0,n=e.down?e.down.length:0,o="secondary";return a<n&&(o="attention"),a===n&&(o="white"),{replyCardStyle:function(e,t,a){var n=e+t[0].toUpperCase()+t.slice(1);return a&&(n=n+a[0].toUpperCase()+a.slice(1)),n}("card",o,t?"open":"closed"),replyCardColor:o}}(ke,T),Ge=Ye.replyCardStyle,$e=Ye.replyCardColor;ke.text&&!Ce?Qe=o.a.createElement(v.j,{fill:$e,onClick:function(t){console.log(t);var a=ke.up,n=ke.down;t?a.push(e.location._id):n.push(e.location._id);var o="/post/".concat(ge,"/reply/vote?user=").concat(e.location._id,"&vote=").concat(t);u()({method:"get",url:o}).then(function(t){z(Object(l.a)({},X,{reply:Object(l.a)({},X.reply,{up:a,down:n})})),e.getPosts(e.location.location)}).catch(function(e){return console.log(e)})}}):Ce&&(Qe=o.a.createElement(v.m,{text:s["post.voted"],direction:c}));var et=o.a.createElement(v.i,{replies:{up:ke.up,down:ke.down}}),tt=null,at=null,nt=null;De&&(tt=ie?o.a.createElement("div",{className:j.a[Object(O.a)("replyEditButtons",c)]},o.a.createElement(w.a,{mode:"secondary",title:s["muni-reply.edit"],action:qe}),o.a.createElement(w.a,{mode:"attention",title:s["muni-reply.delete"],actionMessage:Ue})):null,at=de?o.a.createElement(v.c,{close:Ue,action:function(t){if(console.log("handleDeleteMuniReply"),"primary"===t){var a=Object(l.a)({},X,{reply:{text:"",date:new Date,up:[],down:[]}}),n="/post/".concat(ge);u.a.patch(n,Object(l.a)({},a)).then(function(t){He(),e.getPosts(e.location.location)}).catch(function(e){console.log(e)})}},text:s["muni-reply.delete.text"]}):null,nt=fe?o.a.createElement(v.c,{close:qe,action:function(t){if(console.log("handleEditMuniReply"),"primary"===t){var a=Object(l.a)({},X,{reply:{text:H,date:new Date,up:[],down:[]}}),n="/post/".concat(ge);u.a.patch(n,Object(l.a)({},a)).then(function(t){qe(),e.getPosts(e.location.location)}).catch(function(e){console.log(e)})}},text:s["muni-reply.edit.text"]},o.a.createElement("div",{className:"section"},o.a.createElement("input",{autoFocus:!0,type:"text",name:"reply",value:H,onChange:function(e){return function(e){A(e.target.value)}(e)},placeholder:s["muni.post.prompt.text"],required:!0}))):null),Je=ke.text?o.a.createElement("div",{className:j.a[Ge]},o.a.createElement("div",{className:j.a[Object(O.a)("replyTitleLine",c)]},et,o.a.createElement("span",{className:j.a.replyCardTitle},s["munireply.title"])),o.a.createElement("div",{className:j.a.replyMessage},H),ke.text.length>50?o.a.createElement(v.k,{color:"white"===$e?"primary":"white",title:Se,direction:c,opened:T,action:S}):null,tt,at,nt):null,De&&(Qe=null)}var ot=$?o.a.createElement(v.a,{text:s["post.delete.confirm"],close:He,action:function(t){"secondary"===t&&(e.deletePost(ge),e.getPosts(e.location.location),e.setModule("home"))},direction:c}):null;Ie=V?o.a.createElement(g.a,{disabled:!0,close:Ve},o.a.createElement(v.e,{label:s["newreply.label"],value:H,placeholder:s["newreply.placeholder"],action:function(e){switch(e.target.name){case"replyText":A(e.target.value)}},direction:c,submit:Ve,submitText:s["login.button.submit"]})):null;var ct=ne?o.a.createElement("div",null,o.a.createElement(v.a,{text:s["post.update.confirm"],close:Be,action:function(t){if(console.log(t),"attention"===t)Pe(),z(e.post),Be();else{var a="/post/".concat(ge);u.a.patch(a,Object(l.a)({},X)).then(function(t){Pe(),e.getPosts(e.location.location)}).catch(function(e){console.log(e)})}},direction:c})):null,lt=Q?o.a.createElement("div",{className:j.a.deleteButton},o.a.createElement(w.a,{mode:"attention",action:He},s["post.delete.button"])):null,it=Me||De?{right:{icon:Object(m.i)(De?"secondary":"primary"),action:De?Ae:Pe,noRtl:!0}}:null;(Q||ie)&&(it={right:{icon:Object(m.g)(ie?"secondary":"primary"),action:ie?Ae:Be,noRtl:!0}});var rt=Object(l.a)({name:e.location.name[e.language.short]},it,{left:{icon:Object(m.f)(De?"secondary":"primary"),action:function(){e.setModule(e.prevModule)}}});return o.a.createElement(_.a,{header:!0},o.a.createElement(h.a,rt),o.a.createElement("div",{className:j.a.wrapper},o.a.createElement("div",{"data-testid":"post__view",id:ge,className:j.a.post},o.a.createElement(v.l,{category:Te,title:ve,numbersLine:We}),o.a.createElement(v.h,{src:ye,edit:Q,actions:{set:function(e){z(Object(l.a)({},X,{photo:e}))},remove:function(){z(Object(l.a)({},X,{photo:""}))}}}),o.a.createElement(v.b,{primary:!0,text:_e,direction:c,edit:Q,actions:{set:function(e){z(Object(l.a)({},X,{link:e}))},remove:function(){z(Object(l.a)({},X,{link:""}))}},editText:{message:s["post.link.edit"],confirm:s.confirm,cancel:s.cancel,label:s["new.field.link.label"],placeholder:s["new.field.link.prompt"]}}),o.a.createElement("div",{className:Ne},o.a.createElement(y.a,{step:!0,title:s["post.problem"],text:Ee,direction:c}),o.a.createElement(y.a,{back:!0,title:s["post.solution"],text:je,direction:c})),o.a.createElement(v.k,{color:"primary",title:Se,direction:c,opened:x,action:k})),o.a.createElement("div",{className:j.a.voted},ze),Xe,Ze,Ie,Je,ke.text?o.a.createElement("div",{className:j.a.replyVoted},Qe):null,lt,ot,ct))}),k=a(119),N=Object(c.b)(function(e){return{language:e.language,location:e.locationData,prevModule:e.prevModule,post:e.news.filter(function(t){return t._id===e.post._id})[0],type:e.type}},{setModule:p.l,getMuniPosts:p.c})(function(e){var t=e.language,a=t.direction,c=t.text,i=Object(n.useState)(e.post),s=Object(r.a)(i,2),d=s[0],p=s[1],b=Object(n.useState)(!1),f=Object(r.a)(b,2),g=f[0],E=f[1],O=Object(n.useState)(!1),x=Object(r.a)(O,2),N=x[0],R=x[1],T=Object(n.useState)(!1),S=Object(r.a)(T,2),L=S[0],M=S[1],D=d._id,C=d.title,P=(d.photo,d.link,d.problem,d.votes,d.createdBy,d.date,d.reply,"muni"===e.type),B=function(){M(!L)},H=function(){E(!g)},A=function(){R(!N)},U=L?o.a.createElement("div",{className:j.a.deleteButton},o.a.createElement(w.a,{mode:"attention",action:H},c["post.delete.button"])):null,q=N?o.a.createElement("div",null,o.a.createElement(v.a,{text:c["post.update.confirm"],close:A,action:function(t){if(console.log(t),"attention"===t)B(),p(e.post),A();else{var a="/muni/".concat(e.location.location);u.a.patch(a,Object(l.a)({},d)).then(function(t){B(),e.getMuniPosts(e.location.location)}).catch(function(e){console.log(e)})}},direction:a})):null,V=g?o.a.createElement(v.a,{text:c["post.delete.confirm"],close:H,action:function(t){if("secondary"===t){var a="/muni/".concat(e.location.location);u.a.put(a,{post:D}).then(function(t){B(),e.getMuniPosts(e.location.location)}).catch(function(e){console.log(e)})}},direction:a}):null,F=P?{right:{icon:Object(m.i)("secondary"),action:B,noRtl:!0}}:null;L&&(F={right:{icon:Object(m.g)("secondary"),action:A,noRtl:!0}});var K=Object(l.a)({name:e.location.name[e.language.short]},F,{left:{icon:Object(m.f)(P?"secondary":"primary"),action:function(){e.setModule(e.prevModule)}}});return o.a.createElement(_.a,{header:!0},o.a.createElement(h.a,K),o.a.createElement("div",{className:j.a.wrapper},o.a.createElement("div",{"data-testid":"post__view",id:d._id,className:j.a.post},o.a.createElement(v.l,{muni:!0,title:C}),o.a.createElement(v.h,{src:d.photo,edit:L,actions:{set:function(e){p(Object(l.a)({},d,{photo:e}))},remove:function(){p(Object(l.a)({},d,{photo:""}))}}}),o.a.createElement(k.a,null,o.a.createElement(v.b,{primary:!0,text:d.link,direction:a,edit:L,actions:{set:function(e){p(Object(l.a)({},d,{link:e}))},remove:function(){p(Object(l.a)({},d,{link:""}))}},editText:{message:c["post.link.edit"],confirm:c.confirm,cancel:c.cancel,label:c["new.field.link.label"],placeholder:c["new.field.link.prompt"]}})),o.a.createElement(y.a,{muni:!0,text:d.text,direction:a,edit:L,action:function(e){p(Object(l.a)({},d,{text:e}))}}))),U,V,q)}),R=a(36);t.default=Object(c.b)(function(e){return{muni:"muni"===e.post.type}},{})(function(e){var t=e.muni?o.a.createElement(N,null):o.a.createElement(x,null);return o.a.createElement(R.a,null,t)})},87:function(e,t,a){"use strict";var n=a(12),o=a(10),c=a(27),l=a(16),i=a(0),r=a.n(i),s=a(88),u=a.n(s),d=function(e){return r.a.createElement("h1",{className:"rtl"===e.direction?u.a.titleR:u.a.title},e.title)},m=a(7),p=a(89),b=a.n(p),f=a(90),h=a.n(f),g=Object(m.b)(function(e){return{language:e.language,type:e.type}},{})(function(e){var t=e.language,a=t.direction,n=t.text,i=h.a[Object(o.a)("header",a)],s=h.a[Object(o.a)("headerDesc",a)],u=h.a[Object(o.a)("title",a)];return r.a.createElement("div",{className:h.a.content},r.a.createElement("section",{className:i},r.a.createElement(c.a,{mode:"minimal",action:e.cancel},Object(l.j)("white")),r.a.createElement("div",{className:u},n["help.mycity"]),r.a.createElement(c.a,{mode:"minimal"})),r.a.createElement("section",{className:s},r.a.createElement("div",null,n["help.button.help"])),r.a.createElement("section",{className:h.a.pinned},r.a.createElement("div",null,n["help.post.pinned"])),r.a.createElement("section",{className:h.a.card},r.a.createElement("div",{className:h.a.photo},n["help.post.photo"]),r.a.createElement("div",{className:h.a.category},n["help.post.category"]),r.a.createElement("div",{className:h.a.title},n["help.post.title"]),r.a.createElement("div",{className:h.a.lineThree},n["help.post.age"])),r.a.createElement("section",null,r.a.createElement("div",{className:h.a.voteButtonText},n["muni"===e.type?"help.new.muni":"help.new"])),r.a.createElement("section",null,r.a.createElement("div",{className:h.a.navLeft},n["help.navigation"]),r.a.createElement("div",{className:h.a.navRight},n["help.navigation"])))}),v=Object(m.b)(function(e){return{module:e.module,language:e.language}},{})(function(e){var t=e.language.direction,a=Object(o.a)("help-content",t),n=r.a.createElement("div",{className:a});switch(e.module){case"post":break;case"home":n=r.a.createElement(g,{cancel:e.showHelp})}return r.a.createElement("div",{onClick:function(){return e.showHelp()},className:"help"},n)});t.a=Object(m.b)(function(e){return{language:e.language,type:e.type}},{})(function(e){var t=r.a.useState(!1),a=Object(n.a)(t,2),i=a[0],s=a[1],u=e.language.direction,m=e.name,p=function(e,t){var a=t?b.a.icon:b.a[Object(o.a)("icon",u)];return r.a.createElement("div",{className:a},e)},f=function(){s(!i)},h=e.left?p(e.left.icon,e.left.noRtl):p(Object(l.j)("muni"===e.type?"secondary":"primary"),!0),g=e.right?p(e.right.icon,e.right.noRtl):r.a.createElement("div",null);return r.a.createElement("header",{className:b.a[Object(o.a)("plank",u)]},r.a.createElement(c.a,{mode:"minimal",action:function(){e.left?e.left.action():f()}},h),r.a.createElement(d,{title:m,direction:u}),r.a.createElement(c.a,{mode:"minimal",action:function(){e.right&&e.right.action()}},g),i?r.a.createElement(v,{showHelp:f}):null)})},88:function(e,t,a){e.exports={title:"Title_title__3-ab1",titleR:"Title_titleR__1AdDW"}},89:function(e,t,a){e.exports={plank:"Header_plank__1Xkcj",plankRTL:"Header_plankRTL__22swp",icon:"Header_icon__1KqqL",iconRTL:"Header_iconRTL__2ufUE"}},90:function(e,t,a){e.exports={content:"style_content__2T40g",central:"style_central__ADLjj",header:"style_header__tQ9Sx",headerRTL:"style_headerRTL__2kFRT",icon:"style_icon__1YFTz",iconRTL:"style_iconRTL__3HH5-",title:"style_title__1WHmK",titleRTL:"style_titleRTL__vpycB",headerDesc:"style_headerDesc__3ANCb",headerDescRTL:"style_headerDescRTL__3knRN",pinned:"style_pinned__Kl-fS",card:"style_card__1D5C-",photo:"style_photo__2fnix",category:"style_category__24IMX",lineThree:"style_lineThree__NkwpN",voteButtonText:"style_voteButtonText__2_n0m",navLeft:"style_navLeft__bzWVA",navRight:"style_navRight__k7-Uq"}},96:function(e,t,a){"use strict";var n=a(0),o=a.n(n),c=a(7),l=a(97),i=a.n(l);t.a=Object(c.b)(function(e){return{language:e.language}},{})(function(e){var t=e.language.text;return o.a.createElement("button",{className:i.a.vote},o.a.createElement("div",{className:i.a.inner},o.a.createElement("span",null,t["card.button.vote"])))})},97:function(e,t,a){e.exports={vote:"VoteButton_vote__lXrZs",inner:"VoteButton_inner__2gQwD"}}}]);
//# sourceMappingURL=5.b28c5c56.chunk.js.map