(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{100:function(e,t,a){e.exports={block:"Block_block__25D3U",border:"Block_border__3jZ4R",borderRectangle:"Block_borderRectangle__bDkgw"}},114:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o=a(115),r=a.n(o);t.a=function(e){return l.a.createElement("h2",{className:"rtl"===e.direction?r.a.titleR:r.a.title},e.title)}},115:function(e,t,a){e.exports={title:"SubTitle_title__2Xfou",titleR:"SubTitle_titleR__3z-AB"}},132:function(e,t,a){e.exports={image:"PhotoUpload_image__2Zabf",imageDef:"PhotoUpload_imageDef__2JDPm",input:"PhotoUpload_input__1piRJ"}},133:function(e,t,a){e.exports={step:"Step_step__2Ob0-",filled:"Step_filled__1vPZN"}},134:function(e,t,a){e.exports={"line-template":"Steps_line-template__1pr6S",line:"Steps_line__3O_Uu",lineRTL:"Steps_lineRTL__3yzCh"}},135:function(e,t,a){e.exports={message:"Message_message__1Ow9o",messageRTL:"Message_messageRTL__3vHmD",messageForm:"Message_messageForm__2lKkb",messageFormRTL:"Message_messageFormRTL__34syT",attention:"Message_attention__3IUqP",cancel:"Message_cancel__2CF6p",primary:"Message_primary__1iLkV",secondary:"Message_secondary__1TENZ"}},143:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(8),r=a(5),i=a(9),c=a.n(i),s=a(17),u=a(85),p=a(118),m=a(101),d=a(26),b=a(40),f=a(93),g=a(18),_=a.n(g),v=a(132),w=a.n(v),E=function(e){var t=l.a.useState(""),a=Object(o.a)(t,2),n=a[0],r=a[1],i=function(t){!function(e,t){var a=new FileReader;a.readAsDataURL(e),a.onloadend=function(){t(a.result)}}(t.target.files[0],function(t){var a=function(e){for(var t=e.split(";base64,"),a=t[0].split(":")[1],n=window.atob(t[1]),l=new Uint8Array(n.length),o=0;o<n.length;++o)l[o]=n.charCodeAt(o);return URL.createObjectURL(new Blob([l],{type:a}))}(t);r(a),e.action(t)})},c=n?l.a.createElement("img",{src:n,alt:"upload-image",className:w.a.image}):l.a.createElement("img",{src:"https://res.cloudinary.com/diciu4xpu/image/upload/v1560088174/dev/photo.svg",alt:"upload-image",className:w.a.imageDef});return l.a.createElement(f.a,{border:!0},c,l.a.createElement("input",{id:"file",type:"file",name:"file",className:w.a.input,onChange:function(e){return i(e)}}),l.a.createElement("label",{htmlFor:"file",className:_.a.primarySmall},e.label))},h=a(133),k=a.n(h),O=function(e){var t=e.current<e.step+1?k.a.step:k.a.filled;return l.a.createElement("div",{"data-testid":"step-icon",className:t,onClick:function(){return e.action(e.step)}},e.step)},y=a(134),j=a.n(y),S=a(6),R=function(e){var t=j.a[Object(S.a)("line",e.direction)];return l.a.createElement("section",{className:t},[1,2,3,4,5].map(function(t){return l.a.createElement(O,{key:t,step:t,current:e.current,action:e.action})}))},D=a(135),T=a.n(D),x=function(e){var t=T.a,a=e.use?e.use[0].toUpperCase()+e.use.slice(1):"",n=t[Object(S.a)("message".concat(a),e.direction)],o=t[e.mode];return l.a.createElement("div",{className:n},l.a.createElement("span",{className:o},e.children))},N=a(88),F=function(e){return l.a.createElement(N.a,{padded:!0},e.stepOne,e.stepTwo,e.stepThree,e.stepFour,e.stepFive,e.preview,l.a.createElement(x,{direction:e.direction,mode:"attention",use:"form"},e.message),e.loadingElement)},U=a(41),L=a(34),M=a(31),P=a(98),A=a(92),B=a(114),C=a(27),Z=Object(r.b)(function(e){return{language:e.language,locationData:e.locationData,token:e.token,submitResult:e.submitPost,step:e.step}},{setStep:u.a,submitPost:p.a})(function(e){var t=e.language.direction,a=e.language.text,n=l.a.useState(e.step),r=Object(o.a)(n,2),i=r[0],u=r[1],p=l.a.useState(!1),f=Object(o.a)(p,2),g=f[0],_=f[1],v=l.a.useState(!1),w=Object(o.a)(v,2),h=w[0],k=w[1],O=l.a.useState(""),y=Object(o.a)(O,2),j=y[0],S=y[1],D=l.a.useState(e.locationData.categories[0][e.language.short]),T=Object(o.a)(D,2),x=T[0],Z=T[1],z=l.a.useState(""),J=Object(o.a)(z,2),q=J[0],H=J[1],I=l.a.useState(""),K=Object(o.a)(I,2),V=K[0],X=K[1],G=l.a.useState(""),Q=Object(o.a)(G,2),W=Q[0],Y=Q[1],$=l.a.useState(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=l.a.useState(""),le=Object(o.a)(ne,2),oe=le[0],re=le[1];l.a.useEffect(function(){6===i&&!1===g&&_(!0)},[i]);var ie=function(e){switch(re(""),e.target.name){case"title":S(e.target.value);break;case"problem":H(e.target.value);break;case"solution":X(e.target.value);break;case"link":ae(e.target.value)}},ce=a["new.steps.title"],se=l.a.createElement(R,{current:i,direction:t,action:function(e){g&&u(e)}}),ue=l.a.createElement(d.a,{mode:"primary",action:function(){if(i+1<=6){var e=!0,t=a["new.message.fieldEmpty"];switch(i){case 1:e=""!==j;break;case 2:e=""!==x;break;case 3:e=""!==q;break;case 4:e=""!==V;break;case 5:te&&((e=new RegExp("^([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?").test(te))||(t=a["new.message.urlMalformed"]))}e?(re(""),u(i+1)):re(t)}}},a["new.steps.button.next"]);6===i&&(se=l.a.createElement(C.c,null),ce=a["new.preview"],ue=l.a.createElement(d.a,{mode:"primary",action:function(){var t={user:e.locationData._id,location:e.locationData.location,token:e.token,post:{title:j,category:x,problem:q,solution:V,photo:W,link:te}};c.a.post("/post/create",t).then(function(e){k(!1),re(e.data.message)}).catch(function(e){e.response?e.response.data:e.toString()}),k(!0)}},a["new.steps.button.submit"]));var pe=1===i?Object(s.a)({label:a["new.field.title.label"],type:"text",name:"title",value:j,placeholder:a["new.field.title.prompt"],action:ie,length:2,focus:!0}):null,me=2===i?Object(s.b)({list:function(){var t=[];return e.locationData.categories.map(function(a){var n=Object.keys(a).includes(e.language.short)?e.language.short:"en";t.push({value:a._id,label:a[n]})}),t}(),direction:t,label:a["new.field.category.label"],action:function(e){Z(e.target.value)},focus:!0}):null,de=3===i?Object(s.a)({label:a["new.field.problem.label"],type:"textarea",name:"problem",value:q,placeholder:a["new.field.problem.prompt"],action:ie,length:50,focus:!0}):null,be=4===i?Object(s.a)({label:a["new.field.solution.label"],type:"textarea",name:"solution",value:V,placeholder:a["new.field.solution.prompt"],action:ie,length:50,focus:!0}):null,fe=5===i?l.a.createElement(P.a,null,l.a.createElement(M.a,{direction:t,value:a["new.field.photo.label"]}),l.a.createElement(E,{label:a["new.field.photo.prompt"],direction:t,action:function(e){Y(e)}}),Object(s.a)({label:a["new.field.link.label"],type:"url",name:"link",value:te,placeholder:a["new.field.link.prompt"],action:ie,length:5})):null,ge={title:j,category:x,problem:q,solution:V,photo:W,link:te,_id:"",createdBy:"",date:"",status:"",votes:[]},_e=6===i?l.a.createElement(m.a,{preview:!0,post:ge,action:function(e){}}):null,ve=h?l.a.createElement(b.a,null):null;return l.a.createElement(N.a,{padded:!0},l.a.createElement(L.a,null,l.a.createElement(B.a,{title:ce,direction:t}),se),l.a.createElement(A.a,{direction:t},a["new.steps.step.1"]),l.a.createElement(F,{stepOne:pe,stepTwo:me,stepThree:de,stepFour:be,stepFive:fe,preview:_e,loadingElement:ve,direction:t,message:oe}),l.a.createElement(U.a,{row:!0,direction:t},ue,l.a.createElement(d.a,{mode:"secondary",disabled:1===i,action:function(){i-1>0&&u(i-1)}},a["new.steps.button.back"])))}),z=a(21);t.default=function(){return l.a.createElement(z.a,{opposite:!0},l.a.createElement(Z,null))}},93:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o=a(100),r=a.n(o);t.a=function(e){var t=r.a.block;return e.border?t=r.a.border:e.rectangle&&(t=r.a.borderRectangle),l.a.createElement("div",{className:t},e.children)}}}]);
//# sourceMappingURL=8.9b3dc350.chunk.js.map