{"version":3,"sources":["components/Button.tsx","components/style/Button.module.scss","styles/Content.ts","modules/locations_list.ts","features/Register/index.tsx"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_style_Button_module_scss__WEBPACK_IMPORTED_MODULE_1__","_style_Button_module_scss__WEBPACK_IMPORTED_MODULE_1___default","Button","props","buttonStyle","style","mode","trans","a","createElement","className","onClick","action","actionMessage","type","submit","undefined","disabled","aria-label","label","children","title","module","exports","minimal","button-template","primary","secondary","secondaryFlat","attention","cancel","primarySmall","form","Content","styled","div","_templateObject","padding","locationsList","locations","language","arguments","length","filter","el","Object","keys","name","includes","unsortedResult","map","_id","push","result","sort","value","connect","state","message","loading","typed","register","setModule","setMessage","setLoading","typingData","text","direction","short","location","fName","lName","pass","secondPass","email","_useState","useState","_useState2","slicedToArray","setDisabled","defaultValue","defaultList","_useState3","concat","toConsumableArray","_useState4","locationsObject","setLocationsObject","useEffect","handleInputChange","event","target","defineProperty","showElement","react_default","Loading","emailElement","formSection","placeholder","passwordElement","styles","regular","notMatching","border","locationsElement","formSelection","list","fNameElement","focus","lNameElement","Form","onSubmit","preventDefault","settings","Label","Field","onChange","minLength","required","InLine","justify","id"],"mappings":"2FAAA,IAAAA,EAAAC,EAAA,GAAAC,EAAAD,EAAAE,EAAAH,GAAAI,EAAAH,EAAA,KAAAI,EAAAJ,EAAAE,EAAAC,GAkCeE,IA9BA,SAACC,GAUd,IACIC,EAAcC,IAAMF,EAAMG,OAASD,IAAME,MAO7C,OACET,EAAAU,EAAAC,cAAA,UACEC,UAAWN,EACXO,QAAS,kBAPPR,EAAMS,QAAQT,EAAMS,cACpBT,EAAMU,eAAeV,EAAMU,cAAcV,EAAMG,QAOjDQ,KAAMX,EAAMY,OAAS,cAZrBC,EAaAC,SAAUd,EAAMc,SAChBC,aAAYf,EAAMgB,OACjBhB,EAAMiB,UAAYjB,EAAMkB,6BC5B/BC,EAAAC,QAAA,CAAkBC,QAAA,wBAAAC,kBAAA,gCAAAR,SAAA,yBAAAS,QAAA,wBAAAC,UAAA,0BAAAC,cAAA,8BAAAC,UAAA,0BAAAC,OAAA,uBAAAC,aAAA,6BAAAxB,MAAA,sBAAAyB,KAAA,2JCKlB,IAAMC,QAAUC,EAAOC,IAAVC,IACA,SAAAjC,GAAK,OAAKA,EAAMkC,QAAUlC,EAAMkC,QAAU,IAGxCJ,2IC+BAK,EAhCc,SAC3BC,GAEe,IADfC,EACeC,UAAAC,OAAA,QAAA1B,IAAAyB,UAAA,GAAAA,UAAA,GADI,GAGnB,GAAyB,IAArBF,EAAUG,QAA6B,KAAbF,EAAiB,MAAO,GAMtD,GAJcD,EAAUI,OAAO,SAACC,GAAD,OAC7BC,OAAOC,KAAKF,EAAGG,MAAMC,SAASR,KAGtBE,SAAWH,EAAUG,OAAQ,MAAO,GAE9C,IAAMO,EAAgC,GAChCX,EAA+B,GACrCC,EAAUW,IAAI,SAACN,GAKb,OAHAK,EAAeL,EAAGG,KAAKP,IAAaI,EAAGO,IAEvCb,EAAcc,KAAKR,EAAGG,KAAKP,IACpB,OAGT,IAAMa,EAA+B,GAMrC,OALAf,EAAcgB,OAAOJ,IAAI,SAACN,GAGxB,OADAS,EAAOD,KAAK,CAAEG,MAAON,EAAeL,GAAKzB,MAAOyB,IACzC,OAEFS,oCCoNMG,sBAVS,SAACC,GACvB,MAAO,CACLlB,UAAWkB,EAAMlB,UACjBC,SAAUiB,EAAMjB,SAChBkB,QAASD,EAAMC,QACfC,QAASF,EAAME,QACfC,MAAOH,EAAMG,QAMf,CAAEC,oBAAUC,sBAAWC,wBAAYC,wBAAYC,yBAFlCT,CA9NE,SAACrD,GAYZ,IAEIoC,EAA6DpC,EAA7DoC,UAAWC,EAAkDrC,EAAlDqC,SAAUkB,EAAwCvD,EAAxCuD,QAASC,EAA+BxD,EAA/BwD,QAASC,EAAsBzD,EAAtByD,MAAOG,EAAe5D,EAAf4D,WAC9CG,EAA2B1B,EAA3B0B,KAAMC,EAAqB3B,EAArB2B,UAAWC,EAAU5B,EAAV4B,MACjBC,EAAoDT,EAApDS,SAAUC,EAA0CV,EAA1CU,MAAOC,EAAmCX,EAAnCW,MAAOC,EAA4BZ,EAA5BY,KAAMC,EAAsBb,EAAtBa,WAAYC,EAAUd,EAAVc,MAJ9CC,EAK4BC,oBAAS,GALrCC,EAAAhC,OAAAiC,EAAA,EAAAjC,CAAA8B,EAAA,GAKG1D,EALH4D,EAAA,GAKaE,EALbF,EAAA,GAOEG,EAAe,CAAE7D,MAAO+C,EAAK,wBAAyBX,OAAQ,GAC9D0B,EAAc3C,EAAcC,EAAW6B,GARzCc,EAS0CN,mBAAQ,CACpDI,GADoDG,OAAAtC,OAAAuC,EAAA,EAAAvC,CAEjDoC,KAXDI,EAAAxC,OAAAiC,EAAA,EAAAjC,CAAAqC,EAAA,GASGI,EATHD,EAAA,GASoBE,EATpBF,EAAA,GAcJG,oBAAU,WAEN5B,EAAMS,UACa,KAAnBT,EAAMS,UACNiB,EAAgB5C,SAAWuC,EAAYvC,OAAS,GAEhD6C,EAAmBN,IACpB,CAACK,EAAiB1B,IAGrB4B,oBAAU,WACHlB,GAAUC,GAAUF,GAAaK,GAAUF,GAASC,EAGvDH,GACAC,GACAF,GACAK,GACAF,GACAA,EAAK9B,QAAU,GACf+B,GACAD,IAASC,GAETM,GAAY,GAXZA,GAAY,IAab,CAACT,EAAOC,EAAOF,EAAUK,EAAOF,EAAMC,IAGzCe,oBAAU,WACJf,GAAcD,GAAQA,EAAK9B,OAAS,EACtCqB,EAAWG,EAAK,6BACPM,GAAQC,GAAcD,IAASC,GACxCV,EAAWG,EAAK,mCACjB,CAACM,EAAMC,IAIV,IAkBMgB,EAAoB,SAACC,GACrBhC,GACFvD,EAAM4D,WAAW,IAFqB,IAIhCR,EAAUmC,EAAMC,OAAhBpC,MACJR,EAAO2C,EAAMC,OAAO5C,KACnBA,IAAMA,EAAO,YAEda,EAAMb,KAAUQ,GAClBpD,EAAM8D,WAANpB,OAAA+C,EAAA,EAAA/C,CAAA,GAAoBE,EAAOQ,KAKzBsC,EAAclC,EAClBmC,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,eACboF,EAAAtF,EAAAC,cAACsF,EAAA,EAAD,OAGFD,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,eAAegD,GAG5BsC,EAAeC,YAAY,CAC7B9E,MAAO+C,EAAK,qBACZpD,KAAM,QACNiC,KAAM,QACNQ,MAAOK,EAAMc,GACbwB,YAAahC,EAAK,sBAClBtD,OAAQ6E,EACRtB,UAAWA,IAGTgC,EAAkBF,YAAY,CAChC9E,MAAO+C,EAAK,wBACZpD,KAAM,WACNiC,KAAM,OACNQ,MAAOK,EAAMY,GACb0B,YAAahC,EAAK,yBAClBtD,OAAQ6E,EACR/C,OAAQ,EACRyB,UAAWA,IAGPiC,EAAS,CACbC,QAAS,GACTC,YAAa,CACXC,OAAQ,sCAINC,EAAmBC,YAAc,CACrCC,KAAMpB,EACN/B,MAAOK,EAAMS,SACbF,YACAhD,MAAO+C,EAAK,wBACZtD,OAAQ6E,EACR5B,UAAU,IAGN8C,EAAeV,YAAY,CAC/B9E,MAAO+C,EAAK,qBACZpD,KAAM,OACNiC,KAAM,QACNQ,MAAOK,EAAMU,GACb4B,YAAahC,EAAK,sBAClBtD,OAAQ6E,EACR/C,OAAQ,EACRkE,OAAQzG,EAAMwD,QACdQ,UAAWA,IAEP0C,EAAeZ,YAAY,CAC/B9E,MAAO+C,EAAK,qBACZpD,KAAM,OACNiC,KAAM,QACNQ,MAAOK,EAAMW,GACb2B,YAAahC,EAAK,sBAClBtD,OAAQ6E,EACR/C,OAAQ,EACRyB,UAAWA,IAGb,OACE2B,EAAAtF,EAAAC,cAACwB,EAAA,EAAD,CAASI,QAAQ,QACjByD,EAAAtF,EAAAC,cAACqG,EAAA,EAAD,CACE3C,UAAYA,EACZ4C,SAvGiB,SAACrB,GACpBA,EAAMsB,iBAEDrD,GAAY1C,GACfd,EAAM0D,SAAS,CACba,QACAF,OACAH,WACAC,QACAC,QACA0C,SAAU,CACRzE,SAAUrC,EAAMqC,SAAS4B,WA8F5BoC,EACAG,EACAE,EACAb,EACAG,EACDL,EAAAtF,EAAAC,cAAA,WAASC,UAAU,WACjBoF,EAAAtF,EAAAC,cAACyG,EAAA,EAAD,CAAO/C,UAAWA,GACfD,EAAK,gCAER4B,EAAAtF,EAAAC,cAAC0G,EAAA,EAAD,CACEhD,UAAWA,EACXrD,KAAK,WACLiC,KAAK,aACLQ,MAAOK,EAAMa,GACb2C,SAAU,SAAC1B,GAAD,OACRD,EAAkBC,IAEpBQ,YAAahC,EAAK,gCAClBmD,UAAW,EACXC,UAAQ,EACRjH,MAAOmE,IAASC,EAAa2B,EAAOC,QAAUD,EAAOE,eAIxDT,EAEDC,EAAAtF,EAAAC,cAAC8G,EAAA,EAAD,CAAQpD,UAAWA,EAAWqD,QAAQ,gBACpC1B,EAAAtF,EAAAC,cAACP,EAAA,EAAD,CACEI,KAAK,OACLS,QAAM,EACNE,SAAUA,GAAY0C,EACtBxC,MAAM,UACN2E,EAAAtF,EAAAC,cAAA,SACEK,KAAK,SACLyC,MAAOW,EAAK,yBACZuD,GAAG,gBACH/G,UAAWO,EAAW,wBAA0B","file":"static/js/10.09e6041a.chunk.js","sourcesContent":["import React from \"react\";\n\nimport style from \"./style/Button.module.scss\";\n\nconst Button = (props: {\n  children?: any;\n  action?: () => void;\n  mode: string;\n  submit?: boolean;\n  disabled?: boolean;\n  label?: string;\n  title?: string;\n  actionMessage?: (arg0: string) => void;\n}) => {\n  let undefined;\n  let buttonStyle = style[props.mode] || style.trans;\n\n  const handleClick = () => {\n    if (props.action) props.action();\n    if (props.actionMessage) props.actionMessage(props.mode);\n  };\n\n  return (\n    <button\n      className={buttonStyle}\n      onClick={() => handleClick()}\n      type={props.submit ? \"submit\" : undefined}\n      disabled={props.disabled}\n      aria-label={props.label}>\n      {props.children || props.title}\n    </button>\n  );\n};\n\nexport default Button;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"minimal\":\"Button_minimal__298kb\",\"button-template\":\"Button_button-template__1kqd1\",\"disabled\":\"Button_disabled__2Iwkl\",\"primary\":\"Button_primary__2WdqY\",\"secondary\":\"Button_secondary__LLofr\",\"secondaryFlat\":\"Button_secondaryFlat__3tioF\",\"attention\":\"Button_attention__3GdCk\",\"cancel\":\"Button_cancel__a1znz\",\"primarySmall\":\"Button_primarySmall__3f83K\",\"trans\":\"Button_trans__3y-8c\",\"form\":\"Button_form__2hU85\"};","import styled from \"styled-components\";\n\nexport interface IProps {\n  padding?: string;\n}\n\nconst Content = styled.div<IProps>`\n  padding: ${props => (props.padding ? props.padding : 0)};\n`;\n\nexport default Content;\n","import { indexedObjAny } from \"../store/types\";\n\n/**\n * Function to process locations object to provide array of location names\n * @function locations\n * @param {Array} locations\n * @param {string} language\n * @returns {Object} - in the form of {location:id}\n */\nexport const locationsList = (\n  locations: any,\n  language: string = \"\"\n): Array<any> => {\n  // return empty array if empty params supplied\n  if (locations.length === 0 || language === \"\") return [];\n  // check if names contain language requested\n  const check = locations.filter((el: any) =>\n    Object.keys(el.name).includes(language)\n  );\n  // return empty array if not\n  if (check.length !== locations.length) return [];\n  // process the names as per language request\n  const unsortedResult: indexedObjAny = {};\n  const locationsList: Array<string> = [];\n  locations.map((el: any) => {\n    // add to unsorted list\n    unsortedResult[el.name[language]] = el._id;\n    // add to array of locations to be sorted\n    locationsList.push(el.name[language]);\n    return null;\n  });\n  // sort locations and push appropriate pair to the result\n  const result: Array<indexedObjAny> = [];\n  locationsList.sort().map((el: any) => {\n    // add a pair to the resulting array\n    result.push({ value: unsortedResult[el], label: el });\n    return null;\n  });\n  return result;\n};\n\nexport default locationsList;\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { formSection, formSelection } from \"../../components/formSection\";\n\nimport { AppState } from \"../../store\";\nimport * as TYPE from \"../../store/types\";\nimport {\n  register,\n  setModule,\n  setMessage,\n  setLoading,\n  typingData\n} from \"../../store/users/actions\";\n\nimport Loading from \"../../components/Loading\";\nimport ButtonsWrapper from \"../../layout/ButtonsWrapper\";\nimport Button from \"../../components/Button\";\nimport button from \"../../components/style/Button.module.scss\";\nimport Label from \"../../styles/form/Label\";\nimport locationsList from \"../../modules/locations_list\";\nimport { LocationState } from \"../../models\";\nimport { indexedObjAny } from \"../../store/types\";\nimport InLine from \"../../styles/utils/InLine\";\nimport Field from \"../../styles/form/Field\";\nimport Form from \"../../styles/form/Form\";\nimport Content from \"../../styles/Content\";\n\nconst Register = (props: {\n  locations: LocationState;\n  // storedLocations?: TYPE.data;\n  language: indexedObjAny;\n  message: string;\n  loading: boolean;\n  register: (arg0: TYPE.registerType) => void;\n  setModule: (arg0: string) => void;\n  setMessage: (arg0: string) => void;\n  typed: TYPE.indexedObj;\n  setLoading: (arg0: boolean) => void;\n  typingData: (arg0: { [index: string]: any }) => void;\n}) => {\n  // get the language\n  const { locations, language, message, loading, typed, setMessage } = props;\n  const { text, direction, short } = language;\n  const { location, fName, lName, pass, secondPass, email } = typed;\n  const [disabled, setDisabled] = useState(true);\n\n  const defaultValue = { label: text[\"register.prompt.city\"], value: -1 };\n  const defaultList = locationsList(locations, short);\n  const [locationsObject, setLocationsObject] = useState([\n    defaultValue,\n    ...defaultList\n  ]);\n\n  useEffect(() => {\n    if (\n      typed.location &&\n      typed.location !== \"\" &&\n      locationsObject.length === defaultList.length + 1\n    )\n      setLocationsObject(defaultList);\n  }, [locationsObject, typed]);\n\n  // enable the button, when ready\n  useEffect(() => {\n    if (!fName && !lName && !location && !email && !pass && !secondPass) {\n      setDisabled(true);\n    } else if (\n      fName &&\n      lName &&\n      location &&\n      email &&\n      pass &&\n      pass.length >= 7 &&\n      secondPass &&\n      pass === secondPass\n    ) {\n      setDisabled(false);\n    }\n  }, [fName, lName, location, email, pass, secondPass]);\n\n  // check the passwords\n  useEffect(() => {\n    if (secondPass && pass && pass.length < 7) {\n      setMessage(text[\"register.passwords.min-7\"]);\n    } else if (pass && secondPass && pass !== secondPass)\n      setMessage(text[\"register.passwords.dont-match\"]);\n  }, [pass, secondPass]);\n\n  // * form methods\n  // handle data submit\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    // only if not loading & not disabled\n    if (!loading && !disabled) {\n      props.register({\n        email,\n        pass,\n        location,\n        fName,\n        lName,\n        settings: {\n          language: props.language.short\n        }\n      });\n    }\n  };\n\n  // handle fields input changes\n  const handleInputChange = (event: any) => {\n    if (message) {\n      props.setMessage(\"\");\n    }\n    const { value } = event.target;\n    let name = event.target.name;\n    if (!name) name = \"location\";\n    // set only once\n    if (typed[name] !== value) {\n      props.typingData({ [name]: value });\n    }\n  };\n\n  // set the form elements\n  const showElement = loading ? (\n    <div className='formLoading'>\n      <Loading />\n    </div>\n  ) : (\n    <div className='formMessage'>{message}</div>\n  );\n\n  let emailElement = formSection({\n    label: text[\"login.label.email\"],\n    type: \"email\",\n    name: \"email\",\n    value: typed[email],\n    placeholder: text[\"login.prompt.email\"],\n    action: handleInputChange,\n    direction: direction\n  });\n\n  let passwordElement = formSection({\n    label: text[\"login.label.password\"],\n    type: \"password\",\n    name: \"pass\",\n    value: typed[pass],\n    placeholder: text[\"login.prompt.password\"],\n    action: handleInputChange,\n    length: 7,\n    direction: direction\n  });\n\n  const styles = {\n    regular: {},\n    notMatching: {\n      border: \".1rem solid var(--colorAttention)\"\n    }\n  };\n\n  const locationsElement = formSelection({\n    list: locationsObject,\n    value: typed.location,\n    direction,\n    label: text[\"login.label.location\"],\n    action: handleInputChange,\n    register: true\n  });\n\n  const fNameElement = formSection({\n    label: text[\"login.label.fname\"],\n    type: \"text\",\n    name: \"fName\",\n    value: typed[fName],\n    placeholder: text[\"login.prompt.fname\"],\n    action: handleInputChange,\n    length: 2,\n    focus: !props.loading,\n    direction: direction\n  });\n  const lNameElement = formSection({\n    label: text[\"login.label.lname\"],\n    type: \"text\",\n    name: \"lName\",\n    value: typed[lName],\n    placeholder: text[\"login.prompt.lname\"],\n    action: handleInputChange,\n    length: 3,\n    direction: direction\n  });\n\n  return (\n    <Content padding='1rem'>\n    <Form\n      direction={ direction }\n      onSubmit={handleSubmit}>\n      {/* visible during registration */}\n      {locationsElement}\n      {fNameElement}\n      {lNameElement}\n      {emailElement}\n      {passwordElement}\n      <section className='section'>\n        <Label direction={direction}>\n          {text[\"login.label.password.repeat\"]}\n        </Label>\n        <Field\n          direction={direction}\n          type='password'\n          name='secondPass'\n          value={typed[secondPass]}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n            handleInputChange(event)\n          }\n          placeholder={text[\"login.prompt.password.repeat\"]}\n          minLength={7}\n          required\n          style={pass === secondPass ? styles.regular : styles.notMatching}\n        />\n      </section>\n      {/* message & loading */}\n      {showElement}\n      {/* buttons */}\n      <InLine direction={direction} justify='space-around'>\n        <Button\n          mode='form'\n          submit\n          disabled={disabled || loading}\n          label='Submit'>\n          <input\n            type='button'\n            value={text[\"login.button.register\"]}\n            id='submit_button'\n            className={disabled ? \"primaryButtonDisabled\" : \"primaryButton\"}\n          />\n        </Button>\n      </InLine>\n      </Form></Content>\n  );\n};\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    locations: state.locations,\n    language: state.language,\n    message: state.message,\n    loading: state.loading,\n    typed: state.typed\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { register, setModule, setMessage, setLoading, typingData }\n)(Register);\n"],"sourceRoot":""}