(window.webpackJsonp=window.webpackJsonp||[]).push([[4],Array(86).concat([function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});a(15);var n=function(e){return{type:"SET_STEP",step:e}},r=function(e){return{type:"SHOW_HELP",show:e}}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(6),c=a(91),i=a.n(c);t.a=function(e){var t="paragraph";e.thin?t="paraThin":e.flat&&(t="flat");var a="";return a=e.direction?i.a[Object(o.a)(t,e.direction)]:i.a[t],r.a.createElement("div",{className:a},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t="content";return e.padded&&(t="content-padded"),e.header&&(t="content-header"),r.a.createElement("div",{className:t},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(92),c=a.n(o);t.a=function(e){var t="";return e.step?t=c.a.step:e.back?t=c.a.back:e.wide?t=c.a.wide:e.narrow&&(t=c.a.narrow),r.a.createElement("section",{className:t},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(6),c=a(93),i=a.n(c);t.a=function(e){var t=i.a[Object(o.a)("line",e.direction)];return e.thin?t=i.a[Object(o.a)("thin",e.direction)]:e.flat&&(t=i.a[Object(o.a)("flat",e.direction)]),r.a.createElement("div",{className:t},e.children)}},function(e,t,a){e.exports={paragraph:"Paragraph_paragraph__3Syr1",paragraphRTL:"Paragraph_paragraphRTL__1QixD",paraThinRTL:"Paragraph_paraThinRTL__MbUoL",flatRTL:"Paragraph_flatRTL__2Wrf9",paraThin:"Paragraph_paraThin__3MveS",flat:"Paragraph_flat__1ADWb"}},function(e,t,a){e.exports={step:"Section_step__2Z-m0",back:"Section_back__28i7v",wide:"Section_wide__2N-Dl",narrow:"Section_narrow__3LTjk"}},function(e,t,a){e.exports={"line-template":"Line_line-template__10CJ2",line:"Line_line__3JP9h",thin:"Line_thin__3xGw8",thinRTL:"Line_thinRTL__RhqQo",lineRTL:"Line_lineRTL__1gIVi",flat:"Line_flat__QIoDb",flatRTL:"Line_flatRTL__2J-nY"}},,function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e,t,a){var n=function(e,t){var a=[];return e.map(function(e){a.push({value:e._id,label:e[t]})}),a}(e,t),r="";return n.forEach(function(e){return e.value===a?r=e.label:null}),r}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(14),c=a(107),i=a.n(c);t.a=function(e){return r.a.createElement("p",{className:"rtl"===e.direction?i.a.votersRight:i.a.voters},r.a.createElement("span",{className:i.a.icon}," ",o.h),r.a.createElement("span",{className:i.a.number},e.number.toLocaleString()," "),r.a.createElement("span",{className:i.a.text},e.text))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(108),c=a.n(o);t.a=function(e){return r.a.createElement("h5",{id:"category",className:c.a.category},e.category)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(110),c=a.n(o),i=a(14),l=function(e,t){return r.a.createElement("div",{className:c.a[e]},t)};t.a=function(e){var t=e.edit?c.a.editing:c.a.show,a=e.secondary?"secondary":"primary",n=l("delete",r.a.createElement(i.b,{color:a})),o=l("edit",r.a.createElement(i.c,{color:a})),s=r.a.createElement("img",{src:e.src,className:c.a.photo});return r.a.createElement("div",{className:t},o,s,r.a.createElement("div",{className:c.a.circle},n))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(14),c=a(111),i=a.n(c),l=function(e,t){return r.a.createElement("div",{className:i.a[e]},t)};t.a=function(e){var t=e.edit?i.a.editing:i.a.show,a=e.secondary?"secondary":"primary",n=l("link",r.a.createElement(o.d,{color:a})),c=l("delete",r.a.createElement(o.b,{color:a})),s=l("edit",r.a.createElement(o.c,{color:a}));return r.a.createElement("div",{className:t},s,n,r.a.createElement("div",{className:i.a.text},e.text),c)}},function(e,t,a){"use strict";var n=a(15),r=n;t.a=function(e,t,a){var o=new Date(Date.parse(e));if(!e&&!t||""===e||""===t||"Invalid Date"===o.toString())return"";if(a){var c=o.getMonth()+1,i=c<10?"0".concat(c):c;return"".concat(o.getDate(),"/").concat(i,"/").concat(o.getFullYear())}var l=Object.keys(n.language).includes(t)?t:"en";return"".concat(function(e,t){return r.language[e].months[t]}(l,o.getMonth())," ").concat(o.getDate(),", ").concat(o.getFullYear())}},function(e,t,a){e.exports={post:"Post_post__3Xz8N",text:"Post_text__1WYKA",textClosed:"Post_textClosed__27orF"}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(115),c=a.n(o);t.a=function(e){var t=c.a.block;return e.border?t=c.a.border:e.rectangle&&(t=c.a.borderRectangle),r.a.createElement("div",{className:t},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(87),c=function(e){return r.a.createElement(o.a,{direction:e.direction},e.text)},i=function(e){return r.a.createElement(o.a,{direction:e.direction},e.text)},l=a(89),s=a(90);t.a=function(e){var t=e.direction,a=e.title?r.a.createElement(s.a,{flat:!0,direction:e.direction},r.a.createElement("h4",null,e.title)):null,n=e.back?r.a.createElement(c,{text:e.text,direction:t}):r.a.createElement(i,{text:e.text,direction:t}),o=r.a.createElement("div",null);return e.step?o=r.a.createElement(l.a,{step:!0},a,n):e.back?o=r.a.createElement(l.a,{back:!0},a,n):e.muni&&(o=r.a.createElement(l.a,{step:!0},a,n)),o}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=function(e){var t=new Date,a=new Date(e),n=Math.round((t-a)/1e3/60/60/24);return n},c=a(109),i=a.n(c);t.a=function(e){var t=o(e.date),a={age:i.a.age,text:i.a.text};return"rtl"===e.direction&&(a.age=i.a.ageR),r.a.createElement("p",{className:a.age},t.toLocaleString(),r.a.createElement("span",{className:a.text},1===t?e.text[0]:e.text[1]))}},,,function(e,t,a){e.exports={voters:"Voters_voters__qwL-j",votersRight:"Voters_votersRight__3Xop3",icon:"Voters_icon__R74bR",number:"Voters_number__p5bx1",text:"Voters_text__3xYRY"}},function(e,t,a){e.exports={category:"Category_category__2ASm0"}},function(e,t,a){e.exports={age:"Age_age__2I5ab",ageR:"Age_ageR__3RzVm",text:"Age_text__1n_8g"}},function(e,t,a){e.exports={show:"Photo_show__1mwzh",edit:"Photo_edit__-jiDP",photo:"Photo_photo__2vYxg",editing:"Photo_editing__2cDjY",circle:"Photo_circle__2grxo",delete:"Photo_delete__pYJXB"}},function(e,t,a){e.exports={show:"Link_show__32GRl",editing:"Link_editing__27u0t",edit:"Link_edit__1oD0W",link:"Link_link__2TmV6",text:"Link_text__2zh_0",delete:"Link_delete__1V854"}},function(e,t,a){e.exports={title:"TopBlock_title__2ePM7"}},function(e,t,a){e.exports={text:"ShowMore_text__3GDrI",closed:"ShowMore_closed__2ioyH",more:"ShowMore_more__3g2xa",open:"ShowMore_open__2Op22",openRTL:"ShowMore_openRTL__OswZr",closedRTL:"ShowMore_closedRTL__1BeAK",less:"ShowMore_less__1u7zV"}},function(e,t,a){e.exports={numbers:"NumbersLine_numbers__3GMx3",numbersRTL:"NumbersLine_numbersRTL__3y9dc",date:"NumbersLine_date__I2P0Z"}},function(e,t,a){e.exports={block:"Block_block__25D3U",border:"Block_border__3jZ4R",borderRectangle:"Block_borderRectangle__bDkgw"}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(117),c=a.n(o);t.a=function(e){return r.a.createElement("h2",{className:"rtl"===e.direction?c.a.titleR:c.a.title},e.title)}},function(e,t,a){e.exports={title:"SubTitle_title__2Xfou",titleR:"SubTitle_titleR__3z-AB"}},,function(e,t,a){"use strict";var n=a(9),r=a(0),o=a.n(r),c=a(3),i=a(95),l=a(98),s=a(99),u=a(103),m=a(97),_=a(89),p=a(112),d=a.n(p),f=function(e){return o.a.createElement(_.a,{narrow:!0},o.a.createElement(m.a,{category:e.category}),o.a.createElement("h3",{className:d.a.title},e.title),e.numbersLine)},g=a(6),b=a(14),h=a(113),v=a.n(h),E=function(e){var t=e.opened?"open":"closed",a=v.a[Object(g.a)(t,e.direction)];return o.a.createElement("div",{className:a},o.a.createElement("button",{onClick:function(){return e.action(!e.opened)}},o.a.createElement("span",{className:v.a.more},e.title.more),o.a.createElement("span",{className:v.a.less},e.title.less),o.a.createElement(b.a,{primary:!0})))},w=a(100),x=a(104),y=a(96),k=a(26),L=a(114),R=a.n(L),T=function(e){var t=o.a.createElement("div",{className:R.a.date},Object(w.a)(e.date,"en",!0));return o.a.createElement("div",{className:R.a.numbers},t,o.a.createElement(k.a,null),o.a.createElement(x.a,{date:e.date,text:e.daysText,direction:e.direction}),o.a.createElement(k.a,null),o.a.createElement(y.a,{number:e.votes,text:e.voterText,direction:e.direction}))},S=a(101),N=a.n(S);t.a=Object(c.b)(function(e){return{language:e.language,location:e.locationData}},{})(function(e){var t=e.location.categories,a=e.post,r=a._id,c=a.title,m=a.photo,_=a.link,p=a.problem,d=a.solution,g=a.votes,b=a.date,h=e.language,v=h.direction,w=h.text,x=h.short,y=o.a.useState(!1),k=Object(n.a)(y,2),L=k[0],R=k[1],S=L?N.a.text:N.a.textClosed,O=1===g.length?w["post.voter"]:w["post.voters"],j=Object(i.a)(t,x,e.post.category),P={more:w["post.show-more"],less:w["post.show-less"]},D=o.a.createElement(T,{date:b,daysText:[w["post.age.day"],w["post.age.days"]],direction:v,votes:g.length,voterText:O});return o.a.createElement("div",{"data-testid":"post__view",id:r,className:N.a.post},o.a.createElement(f,{category:j,title:c,numbersLine:D}),o.a.createElement(l.a,{src:m,edit:e.edit}),o.a.createElement(s.a,{primary:!0,text:_,direction:v,edit:e.edit}),o.a.createElement("div",{className:S},o.a.createElement(u.a,{step:!0,title:w["post.problem"],text:p,direction:v}),o.a.createElement(u.a,{back:!0,title:w["post.solution"],text:d,direction:v})),o.a.createElement(E,{title:P,direction:v,opened:L,action:R}))})},,,,,,,,,,function(e,t,a){e.exports={image:"PhotoUpload_image__2Zabf",imageDef:"PhotoUpload_imageDef__2JDPm",input:"PhotoUpload_input__1piRJ"}},function(e,t,a){e.exports={step:"Step_step__2Ob0-",filled:"Step_filled__1vPZN"}},function(e,t,a){e.exports={"line-template":"Steps_line-template__1pr6S",line:"Steps_line__3O_Uu",lineRTL:"Steps_lineRTL__3yzCh"}},function(e,t,a){e.exports={message:"Message_message__1Ow9o",messageRTL:"Message_messageRTL__3vHmD",messageForm:"Message_messageForm__2lKkb",messageFormRTL:"Message_messageFormRTL__34syT",attention:"Message_attention__3IUqP",cancel:"Message_cancel__2CF6p",primary:"Message_primary__1iLkV",secondary:"Message_secondary__1TENZ"}},,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a(3),i=a(10),l=a.n(i),s=a(17),u=a(86),m=a(5),_=a.n(m),p=a(1),d=a(12),f=a(119),g=a(27),b=a(40),h=a(102),v=a(18),E=a.n(v),w=a(129),x=a.n(w),y=function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],i=function(t){!function(e,t){var a=new FileReader;a.readAsDataURL(e),a.onloadend=function(){t(a.result)}}(t.target.files[0],function(t){var a=function(e){for(var t=e.split(";base64,"),a=t[0].split(":")[1],n=window.atob(t[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return URL.createObjectURL(new Blob([r],{type:a}))}(t);c(a),e.action(t)})},l=n?r.a.createElement("img",{src:n,alt:"upload-image",className:x.a.image}):r.a.createElement("img",{src:"https://res.cloudinary.com/diciu4xpu/image/upload/v1560088174/dev/photo.svg",alt:"upload-image",className:x.a.imageDef});return r.a.createElement(h.a,{border:!0},l,r.a.createElement("input",{id:"file",type:"file",name:"file",className:x.a.input,onChange:function(e){return i(e)}}),r.a.createElement("label",{htmlFor:"file",className:E.a.primarySmall},e.label))},k=a(130),L=a.n(k),R=function(e){var t=e.current<e.step+1?L.a.step:L.a.filled;return r.a.createElement("div",{"data-testid":"step-icon",className:t,onClick:function(){return e.action(e.step)}},e.step)},T=a(131),S=a.n(T),N=a(6),O=function(e){var t=S.a[Object(N.a)("line",e.direction)];return r.a.createElement("section",{className:t},[1,2,3,4,5].map(function(t){return r.a.createElement(R,{key:t,step:t,current:e.current,action:e.action})}))},j=a(132),P=a.n(j),D=function(e){var t=P.a,a=e.use?e.use[0].toUpperCase()+e.use.slice(1):"",n=t[Object(N.a)("message".concat(a),e.direction)],o=t[e.mode];return r.a.createElement("div",{className:n},r.a.createElement("span",{className:o},e.children))},M=a(88),A=function(e){return r.a.createElement(M.a,{padded:!0},e.stepOne,e.stepTwo,e.stepThree,e.stepFour,e.stepFive,e.preview,r.a.createElement(D,{direction:e.direction,mode:"attention",use:"form"},e.message),e.loadingElement)},F=a(41),U=a(39),C=a(32),B=a(89),V=a(87),z=a(116),I=a(26),Y=Object(c.b)(function(e){return{language:e.language,locationData:e.locationData,token:e.token,submitResult:e.submitPost,step:e.step}},{setStep:u.a,submitPost:function(e){return console.log(e),function(){var t=Object(d.a)(_.a.mark(function t(a){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l.a.post("/post/create",e).then(function(e){a({type:"SUBMIT_POST",payload:Object(p.a)({},e.data,{code:e.status})})}).catch(function(e){var t=e.response?e.response.data:e.toString();a({type:"SUBMIT_POST",payload:t})});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(function(e){var t=e.language.direction,a=e.language.text,n=r.a.useState(e.step),c=Object(o.a)(n,2),i=c[0],u=c[1],m=r.a.useState(!1),_=Object(o.a)(m,2),p=_[0],d=_[1],h=r.a.useState(!1),v=Object(o.a)(h,2),E=v[0],w=v[1],x=r.a.useState(""),k=Object(o.a)(x,2),L=k[0],R=k[1],T=r.a.useState(e.locationData.categories[0][e.language.short]),S=Object(o.a)(T,2),N=S[0],j=S[1],P=r.a.useState(""),D=Object(o.a)(P,2),Y=D[0],Z=D[1],J=r.a.useState(""),W=Object(o.a)(J,2),G=W[0],H=W[1],X=r.a.useState(""),q=Object(o.a)(X,2),K=q[0],Q=q[1],$=r.a.useState(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useState(""),re=Object(o.a)(ne,2),oe=re[0],ce=re[1];r.a.useEffect(function(){6===i&&!1===p&&d(!0)},[i]);var ie=function(e){switch(ce(""),e.target.name){case"title":R(e.target.value);break;case"problem":Z(e.target.value);break;case"solution":H(e.target.value);break;case"link":ae(e.target.value)}},le=a["new.steps.title"],se=r.a.createElement(O,{current:i,direction:t,action:function(e){p&&u(e)}}),ue=r.a.createElement(g.a,{mode:"primary",action:function(){if(i+1<=6){var e=!0,t=a["new.message.fieldEmpty"];switch(i){case 1:e=""!==L;break;case 2:e=""!==N;break;case 3:e=""!==Y;break;case 4:e=""!==G;break;case 5:te&&((e=new RegExp("^([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?").test(te))||(t=a["new.message.urlMalformed"]))}e?(ce(""),u(i+1)):ce(t)}}},a["new.steps.button.next"]);6===i&&(se=r.a.createElement(I.c,null),le=a["new.preview"],ue=r.a.createElement(g.a,{mode:"primary",action:function(){var t={user:e.locationData._id,location:e.locationData.location,token:e.token,post:{title:L,category:N,problem:Y,solution:G,photo:K,link:te}};l.a.post("/post/create",t).then(function(e){w(!1),ce(e.data.message)}).catch(function(e){e.response?e.response.data:e.toString()}),w(!0)}},a["new.steps.button.submit"]));var me=1===i?Object(s.a)({label:a["new.field.title.label"],type:"text",name:"title",value:L,placeholder:a["new.field.title.prompt"],action:ie,length:2,focus:!0}):null,_e=2===i?Object(s.b)({list:function(){var t=[];return e.locationData.categories.map(function(a){var n=Object.keys(a).includes(e.language.short)?e.language.short:"en";t.push({value:a._id,label:a[n]})}),t}(),direction:t,label:a["new.field.category.label"],action:function(e){j(e.target.value)},focus:!0}):null,pe=3===i?Object(s.a)({label:a["new.field.problem.label"],type:"textarea",name:"problem",value:Y,placeholder:a["new.field.problem.prompt"],action:ie,length:50,focus:!0}):null,de=4===i?Object(s.a)({label:a["new.field.solution.label"],type:"textarea",name:"solution",value:G,placeholder:a["new.field.solution.prompt"],action:ie,length:50,focus:!0}):null,fe=5===i?r.a.createElement(B.a,null,r.a.createElement(C.a,{direction:t,value:a["new.field.photo.label"]}),r.a.createElement(y,{label:a["new.field.photo.prompt"],direction:t,action:function(e){Q(e)}}),Object(s.a)({label:a["new.field.link.label"],type:"url",name:"link",value:te,placeholder:a["new.field.link.prompt"],action:ie,length:5})):null,ge=6===i?r.a.createElement(f.a,{preview:!0,post:{title:L,category:N,problem:Y,solution:G,photo:K,link:te,_id:"",createdBy:"",date:"",status:"",votes:[]}}):null,be=E?r.a.createElement(b.a,null):null;return r.a.createElement(M.a,{padded:!0},r.a.createElement(U.a,null,r.a.createElement(z.a,{title:le,direction:t}),se),r.a.createElement(V.a,{direction:t},a["new.steps.step.1"]),r.a.createElement(A,{stepOne:me,stepTwo:_e,stepThree:pe,stepFour:de,stepFive:fe,preview:ge,loadingElement:be,direction:t,message:oe}),r.a.createElement(F.a,{row:!0,direction:t},ue,r.a.createElement(g.a,{mode:"secondary",disabled:1===i,action:function(){i-1>0&&u(i-1)}},a["new.steps.button.back"])))}),Z=a(21);t.default=function(){return r.a.createElement(Z.a,{opposite:!0},r.a.createElement(Y,null))}}])]);
//# sourceMappingURL=4.87f5411c.chunk.js.map