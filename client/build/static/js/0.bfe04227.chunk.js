(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(83).concat([function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});a(18);var n=function(e){return{type:"SET_STEP",step:e}},r=function(e){return{type:"SHOW_HELP",show:e}}},,,function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t="content";return e.padded&&(t="content-padded"),e.header&&(t="content-header"),r.a.createElement("div",{className:t},e.children)}},,,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(7),c=a(108),i=a.n(c);t.a=function(e){var t="paragraph";e.thin?t="paraThin":e.flat&&(t="flat");var a="";return a=e.direction?i.a[Object(o.a)(t,e.direction)]:i.a[t],r.a.createElement("div",{className:a},e.children)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(7),c=a(110),i=a.n(c);t.a=function(e){var t=i.a[Object(o.a)("line",e.direction)];return e.thin?t=i.a[Object(o.a)("thin",e.direction)]:e.flat&&(t=i.a[Object(o.a)("flat",e.direction)]),r.a.createElement("div",{className:t},e.children)}},,,,,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(109),c=a.n(o);t.a=function(e){var t="";return e.step?t=c.a.step:e.back?t=c.a.back:e.wide?t=c.a.wide:e.narrow&&(t=c.a.narrow),r.a.createElement("section",{className:t},e.children)}},,function(e,t,a){"use strict";var n=a(6),r=a(0),o=a.n(r),c=a(5),i=a(101),l=a(2),s=a(116),u=a(106),_=a(107),d=a(114),m=a(104),p=a(97),f=a(126),h=a.n(f),v=function(e){return o.a.createElement(p.a,{narrow:!0},o.a.createElement(m.a,{category:e.category}),o.a.createElement("h3",{className:h.a.title},e.title),e.numbersLine)},E=a(7),g=a(17),y=a(127),x=a.n(y),w=function(e){var t=e.opened?"open":"close",a=x.a[Object(E.a)("".concat(t).concat(e.color),e.direction)];return o.a.createElement("div",{className:a},o.a.createElement("button",{onClick:function(){return e.action(!e.opened)}},o.a.createElement("span",{className:x.a.more},e.title.more),o.a.createElement("span",{className:x.a.less},e.title.less),o.a.createElement(g.a,{color:e.color||"primary"})))},b=a(117),L=a(105),T=a(102),C=a(23),S=a(128),N=a.n(S),R=function(e){var t=o.a.createElement("div",{className:N.a.date},Object(b.a)(e.date,"en",!0));return o.a.createElement("div",{className:N.a.numbers},t,o.a.createElement(C.a,null),o.a.createElement(L.a,{date:e.date,text:e.daysText,direction:e.direction}),o.a.createElement(C.a,null),o.a.createElement(T.a,{number:e.votes,text:e.voterText,direction:e.direction}))},P=a(103),M=a(129),k=a.n(M),O=function(e){return o.a.createElement("div",{className:k.a.modal,onClick:function(){e.disabled||e.close()}},o.a.createElement("div",{className:k.a.content},e.children))},j=a(111),D=a.n(j),B=a(118),V=a(131),A=a.n(V),W=a(16),z=a(33),I=function(e){e.label;var t=e.value,a=e.placeholder,n=e.action;e.direction;return o.a.createElement("div",{className:A.a.window},o.a.createElement("section",{className:"section"},o.a.createElement(z.a,{direction:e.direction||"ltr",value:e.label}),o.a.createElement("textarea",{autoFocus:!0,name:"replyText",value:t,onChange:function(e){return n(e)},placeholder:a,rows:10})),o.a.createElement(W.a,{mode:"secondary",action:e.submit},e.submitText))},Y=a(91),U=a(10),J=function(e){return console.log(e),o.a.createElement("svg",{viewBox:"0 0 246 218",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"1.414"},o.a.createElement("path",{d:"M5821.7,1534.16C5815.57,1534.21 5810.71,1539.12 5810.71,1545.15L5810.72,1644.26C5811.15,1649.6 5815.69,1653.79 5821.05,1653.79L5885.46,1653.79C5891.17,1653.79 5895.82,1649.15 5895.82,1643.44L5895.82,1640.15C5895.82,1640.15 5898.21,1639.97 5899.3,1640.67C5903.44,1643.3 5908.56,1646.61 5915.23,1646.61L6011.35,1646.61C6047.28,1646.61 6043.43,1614.71 6040.14,1610.36C6046.22,1603.75 6049.97,1592.09 6044.85,1582.88C6048.78,1578.7 6055.7,1567.24 6049.51,1555.37C6061.96,1542.98 6058.11,1517.9 6036.54,1517.9L5979.78,1517.93C5981.94,1505.91 5985.06,1485.99 5984.94,1484.11C5983.74,1466.29 5972.39,1444.61 5971.89,1443.72C5969.82,1439.86 5959.36,1434.63 5948.84,1436.87C5935.23,1439.79 5933.84,1448.47 5933.9,1450.86C5933.9,1450.86 5934.48,1474.61 5934.54,1480.94C5928.03,1495.23 5905.6,1532.78 5898.8,1535.68C5897.2,1534.71 5895.38,1534.18 5893.41,1534.16L5821.7,1534.16Z",fill:U.a[e.frame],fillRule:"nonzero",transform:"matrix(1 0 0 1 -5810.709 -1436.33)"}),o.a.createElement("rect",{x:"6.51",y:"77.212",width:"39.256",height:"62.408",fill:U.a[e.fill],transform:"matrix(1.58488 0 0 1.58488 .007 -14.196)",fillRule:"nonzero"}),o.a.createElement("path",{d:"M98.668,66.973C100.324,60.316 103.364,39.537 103.364,39.537C102.672,29.399 95.888,16.678 95.888,16.678C87.827,13.283 84.217,17.937 84.217,17.937C84.217,17.937 84.623,34.047 84.623,37.771C84.623,41.495 66.209,71.251 61.71,75.088C59.329,77.111 55.045,79.915 51.56,82.075L51.56,130.113L54.356,130.113C57.56,130.113 61.528,135.077 65.884,135.077L127.57,135.053C139.964,135.053 141.945,121.091 133.764,119.748L134.134,118.209C141.981,117.362 146.76,104.963 136.742,102.415L137.112,100.87C144.607,100.089 150.168,88.047 139.72,85.076L140.09,83.531C149.916,81.989 151.932,67.041 141.433,66.973L98.668,66.973Z",fill:U.a[e.fill],transform:"matrix(1.58488 0 0 1.58488 .007 -14.196)"}))};t.a=Object(c.b)(function(e){return{language:e.language,location:e.locationData}},{vote:l.m,updatePost:s.b})(function(e){var t=e.location.categories,a=e.post,r=a._id,c=a.title,l=a.photo,s=a.link,m=a.problem,p=a.solution,f=a.votes,h=a.createdBy,E=a.date,g=a.reply,y=e.language,x=y.direction,b=y.text,L=y.short,T=o.a.useState(!1),C=Object(n.a)(T,2),S=C[0],N=C[1],M=o.a.useState(!1),k=Object(n.a)(M,2),j=k[0],V=k[1],A=o.a.useState(!1),z=Object(n.a)(A,2),U=z[0],Z=z[1],q=S?D.a.text:D.a.textClosed,X=1===f.length?b["post.voter"]:b["post.voters"],F=Object(i.a)(t,L,e.post.category),G={more:b["post.show-more"],less:b["post.show-less"]},Q=function(){Z(!U),e.action({_id:r,action:"vote"})},H=o.a.createElement(R,{date:E,daysText:[b["post.age.day"],b["post.age.days"]],direction:x,votes:f.length,voterText:X}),K=U?o.a.createElement(O,{close:Q},o.a.createElement("div",{className:D.a.square},o.a.createElement(B.a,null,o.a.createElement("span",{className:D.a.modalText},b["vote.thanks"])))):null,$=f.includes(e.location._id),ee=h===e.location._id,te="muni"===e.location.type,ae=$||ee||te?null:o.a.createElement("div",{className:D.a.voteButton,onClick:function(){return Q()}},o.a.createElement(P.a,null)),ne=o.a.useState(""),re=Object(n.a)(ne,2),oe=re[0],ce=re[1],ie=o.a.useState(!1),le=Object(n.a)(ie,2),se=le[0],ue=le[1],_e=function(){oe&&e.updatePost({_id:r,fields:{reply:{text:oe,date:new Date}}}),ue(!1)},de="",me="",pe="",fe="";if(!e.preview){de=te&&!g?o.a.createElement("div",{className:D.a.buttonWrapper},o.a.createElement(W.a,{mode:"primary",action:function(){ue(!se)}},"new reply")):null,me=se?o.a.createElement(O,{disabled:!0,close:_e},o.a.createElement(I,{label:b["newreply.label"],value:oe,placeholder:b["newreply.placeholder"],action:function(e){switch(e.target.name){case"replyText":ce(e.target.value)}},direction:x,submit:_e,submitText:b["login.button.submit"]})):null;var he="secondary";g.up<g.down&&(he="attention"),g.up===g.down&&(he="white");var ve=function(e,t,a){var n=e+t[0].toUpperCase()+t.slice(1);return a&&(n=n+a[0].toUpperCase()+a.slice(1)),n}("card",he,j?"open":"closed");console.log(ve),fe=g.text?o.a.createElement("div",{className:D.a.setOfThumbs},o.a.createElement(J,{frame:"white",fill:he}),o.a.createElement(J,{frame:"white",fill:he})):null;var Ee=o.a.createElement("div",{className:D.a.replyVotes},o.a.createElement("p",null,g.up.length.toLocaleString()),o.a.createElement(J,{frame:"secondary",fill:"secondary"}),o.a.createElement("p",null,g.down.length.toLocaleString()),o.a.createElement(J,{frame:"attention",fill:"attention"}));pe=g.text?o.a.createElement("div",{className:D.a[ve]},Ee,o.a.createElement(Y.a,{direction:x},o.a.createElement("span",{className:D.a.replyCardTitle},b["munireply.title"])),o.a.createElement("div",{className:D.a.replyMessage},g.text),g.text.length>50?o.a.createElement(w,{color:"white",title:G,direction:x,opened:j,action:V}):null):null}return o.a.createElement("div",{className:D.a.wrapper},o.a.createElement("div",{"data-testid":"post__view",id:r,className:D.a.post},o.a.createElement(v,{category:F,title:c,numbersLine:H}),o.a.createElement(u.a,{src:l,edit:e.edit}),o.a.createElement(_.a,{primary:!0,text:s,direction:x,edit:e.edit}),o.a.createElement("div",{className:q},o.a.createElement(d.a,{step:!0,title:b["post.problem"],text:m,direction:x}),o.a.createElement(d.a,{back:!0,title:b["post.solution"],text:p,direction:x})),o.a.createElement(w,{color:"primary",title:G,direction:x,opened:S,action:N})),e.preview?null:ae,K,de,me,pe,fe)})},,function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e,t,a){var n=function(e,t){var a=[];return e.map(function(e){a.push({value:e._id,label:e[t]})}),a}(e,t),r="";return n.forEach(function(e){return e.value===a?r=e.label:null}),r}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(17),c=a(120),i=a.n(c);t.a=function(e){return r.a.createElement("p",{className:"rtl"===e.direction?i.a.votersRight:i.a.voters},r.a.createElement("span",{className:i.a.icon}," ",o.h),r.a.createElement("span",{className:i.a.number},e.number.toLocaleString()," "),r.a.createElement("span",{className:i.a.text},e.text))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(5),c=a(121),i=a.n(c);t.a=Object(o.b)(function(e){return{language:e.language}},{})(function(e){var t=e.language.text;return r.a.createElement("button",{className:i.a.vote},r.a.createElement("div",{className:i.a.inner},r.a.createElement("span",null,t["card.button.vote"])))})},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(122),c=a.n(o);t.a=function(e){return r.a.createElement("h5",{id:"category",className:c.a.category},e.category)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=function(e){var t=new Date,a=new Date(e),n=Math.round((t-a)/1e3/60/60/24);return n},c=a(123),i=a.n(c);t.a=function(e){var t=o(e.date),a={age:i.a.age,text:i.a.text};return"rtl"===e.direction&&(a.age=i.a.ageR),r.a.createElement("p",{className:a.age},t.toLocaleString(),r.a.createElement("span",{className:a.text},1===t?e.text[0]:e.text[1]))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(124),c=a.n(o),i=a(17),l=function(e,t){return r.a.createElement("div",{className:c.a[e]},t)};t.a=function(e){var t=e.edit?c.a.editing:c.a.show,a=e.secondary?"secondary":"primary",n=l("delete",r.a.createElement(i.b,{color:a})),o=l("edit",r.a.createElement(i.c,{color:a})),s=r.a.createElement("img",{src:e.src,className:c.a.photo});return r.a.createElement("div",{className:t},o,s,r.a.createElement("div",{className:c.a.circle},n))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(17),c=a(125),i=a.n(c),l=function(e,t){return r.a.createElement("div",{className:i.a[e]},t)};t.a=function(e){var t=e.edit?i.a.editing:i.a.show,a=e.secondary?"secondary":"primary",n=l("link",r.a.createElement(o.d,{color:a})),c=l("delete",r.a.createElement(o.b,{color:a})),s=l("edit",r.a.createElement(o.c,{color:a}));return r.a.createElement("div",{className:t},s,n,r.a.createElement("div",{className:i.a.text},e.text),c)}},function(e,t,a){e.exports={paragraph:"Paragraph_paragraph__3Syr1",paragraphRTL:"Paragraph_paragraphRTL__1QixD",paraThinRTL:"Paragraph_paraThinRTL__MbUoL",flatRTL:"Paragraph_flatRTL__2Wrf9",paraThin:"Paragraph_paraThin__3MveS",flat:"Paragraph_flat__1ADWb"}},function(e,t,a){e.exports={step:"Section_step__2Z-m0",back:"Section_back__28i7v",wide:"Section_wide__2N-Dl",narrow:"Section_narrow__3LTjk"}},function(e,t,a){e.exports={"line-template":"Line_line-template__10CJ2",line:"Line_line__3JP9h",thin:"Line_thin__3xGw8",thinRTL:"Line_thinRTL__RhqQo",lineRTL:"Line_lineRTL__1gIVi",flat:"Line_flat__QIoDb",flatRTL:"Line_flatRTL__2J-nY"}},function(e,t,a){e.exports={post:"Post_post__3Xz8N",text:"Post_text__1WYKA",textClosed:"Post_textClosed__27orF",voteButton:"Post_voteButton__3u7nB",square:"Post_square__178A-",modalText:"Post_modalText__1axMt",buttonWrapper:"Post_buttonWrapper__XdB5j",replyCard:"Post_replyCard__21u8a",cardSecondaryClosed:"Post_cardSecondaryClosed__2-R7p",cardSecondaryOpen:"Post_cardSecondaryOpen__uReIU",cardAttentionClosed:"Post_cardAttentionClosed__1rBEE",cardAttentionOpen:"Post_cardAttentionOpen__2oySb",replyMessage:"Post_replyMessage__1sJ2R",replyCardTitle:"Post_replyCardTitle__uoUGc",wrapper:"Post_wrapper__2cV-C",setOfThumbs:"Post_setOfThumbs__3Q_ND",replyVotes:"Post_replyVotes__dChvH"}},,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(90),c=function(e){return r.a.createElement(o.a,{direction:e.direction},e.text)},i=function(e){return r.a.createElement(o.a,{direction:e.direction},e.text)},l=a(97),s=a(91);t.a=function(e){var t=e.direction,a=e.title?r.a.createElement(s.a,{flat:!0,direction:e.direction},r.a.createElement("h4",null,e.title)):null,n=e.back?r.a.createElement(c,{text:e.text,direction:t}):r.a.createElement(i,{text:e.text,direction:t}),o=r.a.createElement("div",null);return e.step?o=r.a.createElement(l.a,{step:!0},a,n):e.back?o=r.a.createElement(l.a,{back:!0},a,n):e.muni&&(o=r.a.createElement(l.a,{step:!0},a,n)),o}},,function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return u});var n=a(4),r=a.n(n),o=a(1),c=a(11),i=a(9),l=a.n(i),s=function(e){return console.log(e),function(){var t=Object(c.a)(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l.a.post("/post/create",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a({type:"SUBMIT_POST",payload:Object(o.a)({},e.data,{code:e.status})})}).catch(function(e){var t=e.response?e.response.data:e.toString();a({type:"SUBMIT_POST",payload:t})});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},u=function(e){var t="/post/".concat(e._id);return console.log(e),function(){var a=Object(c.a)(r.a.mark(function a(n){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:l.a.patch(t,e).then(function(e){n({type:"UPDATE_POST",payload:Object(o.a)({},e.data,{code:e.status})})}).catch(function(e){var t=e.response?e.response.data:e.toString();n({type:"UPDATE_POST",payload:t})});case 1:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}},function(e,t,a){"use strict";var n=a(18),r=n;t.a=function(e,t,a){var o=new Date(Date.parse(e));if(!e&&!t||""===e||""===t||"Invalid Date"===o.toString())return"";if(a){var c=o.getMonth()+1,i=c<10?"0".concat(c):c;return"".concat(o.getDate(),"/").concat(i,"/").concat(o.getFullYear())}var l=Object.keys(n.language).includes(t)?t:"en";return"".concat(function(e,t){return r.language[e].months[t]}(l,o.getMonth())," ").concat(o.getDate(),", ").concat(o.getFullYear())}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(130),c=a.n(o);t.a=function(e){var t=c.a["center".concat(e.block?"Block":"")];return r.a.createElement("div",{className:t},e.children)}},,function(e,t,a){e.exports={voters:"Voters_voters__qwL-j",votersRight:"Voters_votersRight__3Xop3",icon:"Voters_icon__R74bR",number:"Voters_number__p5bx1",text:"Voters_text__3xYRY"}},function(e,t,a){e.exports={vote:"VoteButton_vote__1DIW4",inner:"VoteButton_inner__2QZWW"}},function(e,t,a){e.exports={category:"Category_category__2ASm0"}},function(e,t,a){e.exports={age:"Age_age__2I5ab",ageR:"Age_ageR__3RzVm",text:"Age_text__1n_8g"}},function(e,t,a){e.exports={show:"Photo_show__1mwzh",edit:"Photo_edit__-jiDP",photo:"Photo_photo__2vYxg",editing:"Photo_editing__2cDjY",circle:"Photo_circle__2grxo",delete:"Photo_delete__pYJXB"}},function(e,t,a){e.exports={show:"Link_show__32GRl",editing:"Link_editing__27u0t",edit:"Link_edit__1oD0W",link:"Link_link__2TmV6",text:"Link_text__2zh_0",delete:"Link_delete__1V854"}},function(e,t,a){e.exports={title:"TopBlock_title__2ePM7"}},function(e,t,a){e.exports={text:"ShowMore_text__3GDrI",close:"ShowMore_close__2yOEL",more:"ShowMore_more__3g2xa",open:"ShowMore_open__2Op22",openprimary:"ShowMore_openprimary__1nyrv",openprimaryRTL:"ShowMore_openprimaryRTL__1LWj1",opensecondary:"ShowMore_opensecondary__2ct5y",opensecondaryRTL:"ShowMore_opensecondaryRTL__2Dr8f",openwhite:"ShowMore_openwhite__1Vqxy",openwhiteRTL:"ShowMore_openwhiteRTL__3FAzs",closeprimary:"ShowMore_closeprimary___g7rZ",closeprimaryRTL:"ShowMore_closeprimaryRTL__3ybz1",closesecondary:"ShowMore_closesecondary__2ZvWf",closesecondaryRTL:"ShowMore_closesecondaryRTL__iRLAp",closewhite:"ShowMore_closewhite__1yMXW",closewhiteRTL:"ShowMore_closewhiteRTL__1aB3x",less:"ShowMore_less__1u7zV"}},function(e,t,a){e.exports={numbers:"NumbersLine_numbers__3GMx3",numbersRTL:"NumbersLine_numbersRTL__3y9dc",date:"NumbersLine_date__I2P0Z"}},function(e,t,a){e.exports={modal:"Modal_modal__1z-9A",content:"Modal_content__1eezV"}},function(e,t,a){e.exports={center:"Center_center__SOzh3",centerBlock:"Center_centerBlock__2xXiY"}},function(e,t,a){e.exports={window:"NewReply_window__256d4"}}])]);
//# sourceMappingURL=0.bfe04227.chunk.js.map