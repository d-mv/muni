(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{112:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r=a(113),o=a.n(r);t.a=function(e){return l.a.createElement("h2",{className:"rtl"===e.direction?o.a.titleR:o.a.title},e.title)}},113:function(e,t,a){e.exports={title:"SubTitle_title__2Xfou",titleR:"SubTitle_titleR__3z-AB"}},132:function(e,t,a){e.exports={image:"PhotoUpload_image__2Zabf",imageDef:"PhotoUpload_imageDef__2JDPm",input:"PhotoUpload_input__1piRJ"}},133:function(e,t,a){e.exports={step:"Step_step__2Ob0-",filled:"Step_filled__1vPZN"}},134:function(e,t,a){e.exports={"line-template":"Steps_line-template__1pr6S",line:"Steps_line__3O_Uu",lineRTL:"Steps_lineRTL__3yzCh"}},135:function(e,t,a){e.exports={message:"Message_message__1Ow9o",messageRTL:"Message_messageRTL__3vHmD",messageForm:"Message_messageForm__2lKkb",messageFormRTL:"Message_messageFormRTL__34syT",attention:"Message_attention__3IUqP",cancel:"Message_cancel__2CF6p",primary:"Message_primary__1iLkV",secondary:"Message_secondary__1TENZ"}},143:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(8),o=a(5),i=a(9),c=a.n(i),s=a(17),u=a(83),p=a(116),m=a(2),d=a(99),b=a(26),f=a(40),g=a(92),_=a(18),v=a.n(_),w=a(132),E=a.n(w),h=function(e){var t=l.a.useState(),a=Object(r.a)(t,2),n=a[0],o=a[1],i=function(t){!function(e,t){var a=new FileReader;a.readAsDataURL(e),a.onloadend=function(){t(a.result)}}(t.target.files[0],function(t){var a=function(e){for(var t=e.split(";base64,"),a=t[0].split(":")[1],n=window.atob(t[1]),l=new Uint8Array(n.length),r=0;r<n.length;++r)l[r]=n.charCodeAt(r);return URL.createObjectURL(new Blob([l],{type:a}))}(t);o(a),e.action(t)})},c=n?l.a.createElement("img",{src:n,alt:"upload-image",className:E.a.image}):l.a.createElement("img",{src:"https://res.cloudinary.com/diciu4xpu/image/upload/v1560088174/dev/photo.svg",alt:"upload-image",className:E.a.imageDef});return l.a.createElement(g.a,{border:!0},c,l.a.createElement("input",{id:"file",type:"file",name:"file",className:E.a.input,onChange:function(e){return i(e)}}),l.a.createElement("label",{htmlFor:"file",className:v.a.primarySmall},e.label))},k=a(133),y=a.n(k),O=function(e){var t=e.current<e.step+1?y.a.step:y.a.filled;return l.a.createElement("div",{"data-testid":"step-icon",className:t,onClick:function(){return e.action(e.step)}},e.step)},S=a(134),j=a.n(S),R=a(6),x=function(e){var t=j.a[Object(R.a)("line",e.direction)];return l.a.createElement("section",{className:t},[1,2,3,4,5].map(function(t){return l.a.createElement(O,{key:t,step:t,current:e.current,action:e.action})}))},T=a(135),N=a.n(T),F=function(e){var t=N.a,a=e.use?e.use[0].toUpperCase()+e.use.slice(1):"",n=t[Object(R.a)("message".concat(a),e.direction)],r=t[e.mode];return l.a.createElement("div",{className:n},l.a.createElement("span",{className:r},e.children))},M=a(86),U=function(e){return l.a.createElement(M.a,{padded:!0},e.stepOne,e.stepTwo,e.stepThree,e.stepFour,e.stepFive,e.preview,l.a.createElement(F,{direction:e.direction,mode:"attention",use:"form"},e.message),e.loadingElement)},L=a(41),D=a(118),P=a(31),A=a(97),B=a(90),C=a(112),Z=a(27),z=a(91),J=function(e){return l.a.createElement(z.a,{direction:e.direction},l.a.createElement("p",{className:"textStandard"},function(e,t){var a="";return t.map(function(t){t._id===e&&(a=t.description)}),a}(e.category,e.categories)))},q=Object(o.b)(function(e){return{language:e.language,location:e.locationData,token:e.token,submitResult:e.submitPost,step:e.step}},{setStep:u.a,submitPost:p.a,setModule:m.k})(function(e){var t=e.language,a=t.direction,n=t.text,o=e.location,i=o.categories,u=o._id,p=o.location,m=l.a.useState(e.step),g=Object(r.a)(m,2),_=g[0],v=g[1],w=l.a.useState(!1),E=Object(r.a)(w,2),k=E[0],y=E[1],O=l.a.useState(!1),S=Object(r.a)(O,2),j=S[0],R=S[1],T=l.a.useState(""),N=Object(r.a)(T,2),F=N[0],z=N[1],q=l.a.useState(i[0]._id),H=Object(r.a)(q,2),I=H[0],K=H[1],V=l.a.useState(""),X=Object(r.a)(V,2),G=X[0],Q=X[1],W=l.a.useState(""),Y=Object(r.a)(W,2),$=Y[0],ee=Y[1],te=l.a.useState(""),ae=Object(r.a)(te,2),ne=ae[0],le=ae[1],re=l.a.useState(""),oe=Object(r.a)(re,2),ie=oe[0],ce=oe[1],se=l.a.useState(""),ue=Object(r.a)(se,2),pe=ue[0],me=ue[1];l.a.useEffect(function(){6===_&&!1===k&&y(!0)},[_]);var de=function(e){switch(me(""),e.target.name){case"title":z(e.target.value);break;case"problem":Q(e.target.value);break;case"solution":ee(e.target.value);break;case"link":ce(e.target.value)}},be=n["new.steps.title"],fe=l.a.createElement(x,{current:_,direction:a,action:function(e){k&&v(e)}}),ge=l.a.createElement(b.a,{mode:"primary",action:function(){if(_+1<=6){var e=!0,t=n["new.message.fieldEmpty"];switch(_){case 1:e=""!==F;break;case 2:e=""!==I;break;case 3:e=""!==G;break;case 4:e=""!==$;break;case 5:ie&&((e=new RegExp("^([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?").test(ie))||(t=n["new.message.urlMalformed"]))}e?(me(""),v(_+1)):me(t)}}},n["new.steps.button.next"]);6===_&&(fe=l.a.createElement(Z.c,null),be=n["new.preview"],ge=l.a.createElement(b.a,{mode:"primary",action:function(){var t={user:u,location:p,token:e.token,post:{title:F,category:I,problem:G,solution:$,photo:ne,link:ie}};c.a.post("/post/create",t).then(function(t){R(!1),me(t.data.message),t.status&&e.setModule("home")}).catch(function(e){e.response?e.response.data:e.toString()}),R(!0)}},n["new.steps.button.submit"]));var _e=1===_?Object(s.a)({label:n["new.field.title.label"],type:"text",name:"title",value:F,placeholder:n["new.field.title.prompt"],action:de,length:2,focus:!0}):null,ve=2===_?l.a.createElement("div",null,Object(s.b)({list:function(){var t=[];return t.map(function(a){var n=Object.keys(a).includes(e.language.short)?e.language.short:"en";t.push({value:a._id,label:a[n]})}),t}(),direction:a,label:n["new.field.category.label"],action:function(e){K(e.target.value)},focus:!0}),l.a.createElement(J,{direction:a,category:I,categories:i})):null,we=3===_?Object(s.a)({label:n["new.field.problem.label"],type:"textarea",name:"problem",value:G,placeholder:n["new.field.problem.prompt"],action:de,length:50,focus:!0}):null,Ee=4===_?Object(s.a)({label:n["new.field.solution.label"],type:"textarea",name:"solution",value:$,placeholder:n["new.field.solution.prompt"],action:de,length:50,focus:!0}):null,he=5===_?l.a.createElement(A.a,null,l.a.createElement(P.a,{direction:a,value:n["new.field.photo.label"]}),l.a.createElement(h,{label:n["new.field.photo.prompt"],direction:a,action:function(e){le(e)}}),Object(s.a)({label:n["new.field.link.label"],type:"url",name:"link",value:ie,placeholder:n["new.field.link.prompt"],action:de,length:5})):null,ke={title:F,category:I,problem:G,solution:$,photo:ne,link:ie,_id:"",createdBy:"",date:"",status:"",votes:[]},ye=6===_?l.a.createElement(d.a,{preview:!0,post:ke,action:function(e){}}):null,Oe=j?l.a.createElement(f.a,null):null;return l.a.createElement(M.a,{padded:!0},l.a.createElement(D.a,null,l.a.createElement(C.a,{title:be,direction:a}),fe),l.a.createElement(B.a,{direction:a},n["new.steps.step.1"]),l.a.createElement(U,{stepOne:_e,stepTwo:ve,stepThree:we,stepFour:Ee,stepFive:he,preview:ye,loadingElement:Oe,direction:a,message:pe}),l.a.createElement(L.a,{row:!0,direction:a},ge,l.a.createElement(b.a,{mode:"secondary",disabled:1===_,action:function(){_-1>0&&v(_-1)}},n["new.steps.button.back"])))}),H=a(21);t.default=function(){return l.a.createElement(H.a,{opposite:!0},l.a.createElement(q,null))}},92:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r=a(98),o=a.n(r);t.a=function(e){var t=o.a.block;return e.border?t=o.a.border:e.rectangle&&(t=o.a.borderRectangle),l.a.createElement("div",{className:t},e.children)}},98:function(e,t,a){e.exports={block:"Block_block__25D3U",border:"Block_border__3jZ4R",borderRectangle:"Block_borderRectangle__bDkgw"}}}]);
//# sourceMappingURL=8.3c75122c.chunk.js.map