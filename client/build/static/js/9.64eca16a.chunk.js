(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{107:function(e,t,n){"use strict";var a=n(8),o=n(9),c=n(12);function l(){var e=Object(a.a)(["\n  margin: 1.5rem auto;\n  width: 90%;\n  border-radius: ",";\n  box-shadow: ",";\n"]);return l=function(){return e},e}var r=o.a.article(l(),c.k,c.h);t.a=r},108:function(e,t,n){"use strict";var a=n(32),o=n(39),c=n(25),l=n(0),r=n.n(l),i=n(8),s=n(9),u=n(1),d=n(14);function p(){var e=Object(i.a)(["\ncolor: ","\nfont: ","\n"]);return p=function(){return e},e}var m=s.a.h1(p(),function(e){return e.muni?u.m:u.i},d.a),h=n(11),f=n(110),b=n.n(f),g=n(5),v=n(111),y=n.n(v),E=Object(h.b)(function(e){return{language:e.language,type:e.type}},{})(function(e){var t=e.language,n=t.direction,l=t.text,i=y.a[Object(a.a)("header",n)],s=y.a[Object(a.a)("headerDesc",n)],u=y.a[Object(a.a)("title",n)];return r.a.createElement("div",{className:y.a.content},r.a.createElement("section",{className:i},r.a.createElement(o.a,{mode:"minimal",onClick:e.cancel},Object(c.j)("white")),r.a.createElement("div",{className:u},l["help.mycity"]),r.a.createElement(o.a,{mode:"minimal"})),r.a.createElement("section",{className:s},r.a.createElement("div",null,l["help.button.help"])),r.a.createElement("section",{className:y.a.pinned},r.a.createElement("div",null,l["help.post.pinned"])),r.a.createElement("section",{className:y.a.card},r.a.createElement("div",{className:y.a.photo},l["help.post.photo"]),r.a.createElement("div",{className:y.a.category},l["help.post.category"]),r.a.createElement("div",{className:y.a.title},l["help.post.title"]),r.a.createElement("div",{className:y.a.lineThree},l["help.post.age"])),r.a.createElement("section",null,r.a.createElement("div",{className:y.a.voteButtonText},l["muni"===e.type?"help.new.muni":"help.new"])),r.a.createElement("section",null,r.a.createElement("div",{className:y.a.navLeft},l["help.navigation"]),r.a.createElement("div",{className:y.a.navRight},l["help.navigation"])))}),_=Object(h.b)(function(e){return{module:e.module,language:e.language,help:e.help}},{showHelp:g.m})(function(e){var t=e.language.direction,n=Object(a.a)("help-content",t),o=function(){e.showHelp(!e.help)},c=r.a.createElement("div",{className:n});switch(e.module){case"post":break;case"home":c=r.a.createElement(E,{cancel:o})}return r.a.createElement("div",{onClick:function(){return o()},className:"help"},c)});t.a=Object(h.b)(function(e){return{language:e.language,user:e.auth.user,help:e.help,module:e.module}},{showHelp:g.m})(function(e){var t=e.language.direction,n=e.name,i=e.user,s=e.module,u=function(e,n){var o=n?b.a.icon:b.a[Object(a.a)("icon",t)];return r.a.createElement("div",{className:o},e)};Object(l.useEffect)(function(){i.settings.help&&e.showHelp(!0)},[]);var d=e.left?u(e.left.icon,e.left.noRtl):"home"===s?u(Object(c.j)("muni"===e.user.type?"secondary":"primary"),!0):r.a.createElement("div",null),p=e.right?u(e.right.icon,e.right.noRtl):r.a.createElement("div",null);return r.a.createElement("header",{className:b.a[Object(a.a)("plank",t)]},r.a.createElement(o.a,{mode:"minimal",onClick:function(){e.left?e.left.action():"home"===s&&e.showHelp(!e.help)}},d),r.a.createElement(m,{muni:"muni"===e.user.type},n),r.a.createElement(o.a,{mode:"minimal",onClick:function(){e.right&&e.right.action()}},p),e.help?r.a.createElement(_,null):null)})},110:function(e,t,n){e.exports={plank:"Header_plank__1Xkcj",plankRTL:"Header_plankRTL__22swp",icon:"Header_icon__1KqqL",iconRTL:"Header_iconRTL__2ufUE"}},111:function(e,t,n){e.exports={content:"style_content__2T40g",central:"style_central__ADLjj",header:"style_header__tQ9Sx",headerRTL:"style_headerRTL__2kFRT",icon:"style_icon__1YFTz",iconRTL:"style_iconRTL__3HH5-",title:"style_title__1WHmK",titleRTL:"style_titleRTL__vpycB",headerDesc:"style_headerDesc__3ANCb",headerDescRTL:"style_headerDescRTL__3knRN",pinned:"style_pinned__Kl-fS",card:"style_card__1D5C-",photo:"style_photo__2fnix",category:"style_category__24IMX",lineThree:"style_lineThree__NkwpN",voteButtonText:"style_voteButtonText__2_n0m",navLeft:"style_navLeft__bzWVA",navRight:"style_navRight__k7-Uq"}},120:function(e,t,n){"use strict";var a=n(0),o=n.n(a),c=n(8),l=n(9),r=n(1),i=n(12),s=n(14),u=n(27);function d(){var e=Object(c.a)(["\n  width: 100%;\n  text-align: center;\n  user-select: none;\n  font: ",";\n  color: ",";\n"]);return d=function(){return e},e}function p(){var e=Object(c.a)(["\n  box-shadow: ",";\n  width: 6.5rem;\n  height: 6.5rem;\n  border-radius: 50%;\n  background-color: ",";\n  border: "," !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: ",";\n  transition: ",";\n  &:active {\n    transform: scale(0.95);\n  }\n"]);return p=function(){return e},e}var m=l.a.button(p(),Object(i.g)(r.j),r.i,i.e,u.b,u.c),h=l.a.div(d(),s.f,r.r);t.a=function(e){return o.a.createElement(m,null,o.a.createElement(h,null,e.title))}},128:function(e,t,n){"use strict";var a=n(8);function o(){var e=Object(a.a)(["\n  padding: ",";\n"]);return o=function(){return e},e}var c=n(9).a.div(o(),function(e){return e.padding?e.padding:0});t.a=c},162:function(e,t,n){e.exports={block:"Block_block__25D3U",border:"Block_border__3jZ4R",borderRectangle:"Block_borderRectangle__bDkgw"}},174:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(7),l=n(51),r=n(26),i=n(11),s=n(116),u=n(25),d=n(5),p=n(15),m=n(120),h=n(108),f=n(130),b=n(129),g=n(124),v=n(136),y=n(128),E=n(144),_=n.n(E),j=n(32),w=n(39),O=n(10),x=n(4),k=n(8),P=n(9),N=n(113);function R(){var e=Object(k.a)(["\n  height: 2.5rem;\n  width: 1.5rem;\n  padding: .5rem 1rem .5rem .8rem;\n  transform: rotate(270deg);\n"]);return R=function(){return e},e}var T=Object(P.a)(N.a)(R()),C=n(114),L=n(1),S=n(14);function M(){var e=Object(k.a)(["\nwhite-space: nowrap;\npadding: 0.5rem 2rem;\ntext-align: center;\nmargin: 0 auto;\nbackground-color: white;\ncolor: ","\nfont: ","\n"]);return M=function(){return e},e}var D=P.a.div(M(),L.i,S.l),H=n(47),B=n(104),A=n(106),q=n(49),U=n(107);function F(){var e=Object(k.a)(["\n  background-color: ",";\n  width:90%;\n  margin: 0 auto;\n"]);return F=function(){return e},e}var K=Object(P.a)(U.a)(F(),function(e){return e.color?e.color:"white"}),z=n(127),J=n(145),V=Object(i.b)(function(e){return{language:e.language,locations:e.locations,posts:e.posts,news:e.news,post:e.post,mode:e.mode,prevModule:e.prevModule,token:e.token,auth:e.auth,categories:e.categories}},{vote:d.o,updatePost:p.m,setModule:d.k,fetchData:d.b,getPosts:p.g,deletePost:p.e,showPost:p.j,votePost:p.n})(function(e){var t=e.categories,n=e.auth,i=e.locations,d=e.post,p=n.user,E=e.language,k=E.direction,P=E.text,R=E.short,S=Object(a.useState)(!1),M=Object(r.a)(S,2),U=M[0],F=M[1],V=Object(a.useState)(!1),W=Object(r.a)(V,2),X=(W[0],W[1],Object(a.useState)(!1)),I=Object(r.a)(X,2),Q=I[0],Y=I[1],Z=Object(a.useState)(!1),G=Object(r.a)(Z,2),$=G[0],ee=G[1],te=(o.a.createRef(),e.posts.filter(function(t){return t._id===e.post._id})[0]),ne=Object(a.useState)(!1),ae=Object(r.a)(ne,2),oe=ae[0],ce=ae[1],le=Object(a.useState)(!1),re=Object(r.a)(le,2),ie=re[0],se=re[1],ue=Object(a.useState)(!1),de=Object(r.a)(ue,2),pe=de[0],me=de[1],he=Object(a.useState)(!1),fe=Object(r.a)(he,2),be=fe[0],ge=fe[1],ve=Object(a.useState)(!1),ye=Object(r.a)(ve,2),Ee=ye[0],_e=ye[1],je=Object(a.useState)(!1),we=Object(r.a)(je,2),Oe=we[0],xe=we[1],ke=i.filter(function(e){return e._id===p.location})[0],Pe=U?_.a.text:_.a.textClosed,Ne=1===d.votes.length?P["post.voter"]:P["post.voters"],Re=Object(s.a)(t,R,d.category),Te={more:P["post.show-more"],less:P["post.show-less"]},Ce=d.votes.includes(e.auth.user._id),Le=d.createdBy===e.auth.user._id,Se="muni"===n.user.type;Object(a.useEffect)(function(){console.log("posts changed"),e.showPost(e.posts.filter(function(t){return t._id===e.post._id})[0])},[e.posts]);var Me=!1;d.reply.up||d.reply.down?d.reply.up.length>0&&d.reply.down.length>0?Me=[].concat(Object(l.a)(d.reply.up),Object(l.a)(d.reply.down)).includes(e.auth.user._id):d.reply.up.length>0?Me=d.reply.up.includes(e.auth.user._id):d.reply.down.length>0&&(Me=d.reply.down.includes(e.auth.user._id)):Me=!0;var De=function(){ee(!$)},He=function(){me(!pe)},Be=function(){se(!ie)},Ae=function(){ge(!be)},qe=function(){_e(!Ee)},Ue=function(){xe(!Oe)},Fe=function(t){e.showPost({reply:{text:t.target.value}})},Ke=function(t){Object(x.a)({text:"submitUpdatePost:",emph:t||"",type:"positive"}),xe(!1),ge(!1),ee(!1),t?(ce(!1),me(!1),"attention"===t?e.showPost(te):e.updatePost(d)):e.updatePost(d)},ze=function(t){console.log("object"),Object(x.a)({text:"handleReplyVoting:",emph:t.toString(),type:"positive"});var n=d.reply.up,a=d.reply.down;t?n.push(e.auth.user._id):a.push(e.auth.user._id);var o=Object(c.a)({},d.reply,{reply:Object(c.a)({},d.reply,{up:n,down:a})}),l=Object(c.a)({},d,{reply:o});e.showPost(l),e.updatePost(Object(c.a)({},d,{reply:o}))},Je=P["post.age"],Ve=Q?o.a.createElement(b.d,{close:function(){Y(!Q)},text:P["vote.thanks"]}):null,We=d.votes.includes(e.auth.user._id);console.log("voted ",We);var Xe,Ie=function(){return We?o.a.createElement(D,null,P["post.voted"]):Ce||Le||Se?void 0:o.a.createElement("div",{className:_.a.voteButton,onClick:function(){return Y(!0),setTimeout(function(){Y(!1)},2e3),e.showPost(Object(c.a)({},d,{votes:[d.votes,p._id]})),void e.votePost(d._id)}},o.a.createElement(m.a,{title:P["card.button.vote"]}))},Qe="",Ye="",Ze=Se&&!d.reply.text?o.a.createElement(b.f,{action:De,text:P["post.muni.newreply"]}):null;if(d.reply){d.reply.text&&!Me?Ye=o.a.createElement("div",{className:_.a[Object(j.a)("thumbsContainer",k)]},o.a.createElement("div",{onClick:function(e){return ze(!0)}},Object(u.f)("white")),o.a.createElement("div",{onClick:function(e){return ze(!1)}},Object(u.f)("white"))):Me&&(Ye="");var Ge=null,$e=null,et=null;Se&&(Ge=be?o.a.createElement(H.a,{id:"reply__edit-delete_buttons-wrapper",direction:k,justify:"space-around",padding:"0 0 2rem 0",width:"100%"},o.a.createElement(w.a,{mode:"secondary",onClick:Ue},P["muni-reply.edit"]),o.a.createElement(w.a,{mode:"attention",onClickMessage:qe},P["muni-reply.delete"])):null,$e=Ee?o.a.createElement(b.c,{direction:k,close:qe,action:function(t){if(Object(x.a)({text:"submitDeletePost:",emph:t,type:"positive"}),"primary"===t){var n=Object(c.a)({},d,{reply:{}});e.showPost(n),e.updatePost(n)}ge(!1)},text:P["muni-reply.delete.text"]}):null,et=Oe?o.a.createElement(b.c,{direction:k,close:Ue,action:Ke,text:P["muni-reply.edit.text"]},o.a.createElement("div",{className:"section"},o.a.createElement(q.a,{direction:k,autoFocus:!0,type:"text",name:"reply",value:d.reply.text,onChange:function(e){return Fe(e)},placeholder:P["muni.post.prompt.text"],required:!0}))):null),Qe=d.reply.text?o.a.createElement(K,null,o.a.createElement(H.a,{padding:"1rem 1rem 0 1rem",direction:k,justify:"space-between"},o.a.createElement(A.a,{direction:k},P["munireply.title"]),o.a.createElement(b.i,{replies:{up:d.reply.up,down:d.reply.down},direction:k})),o.a.createElement(B.a,{direction:k},o.a.createElement(z.a,{direction:k},d.reply.text),o.a.createElement(C.a,{space:1})),Ge,$e,et):null,Se&&(Ye=null)}var tt=ie?o.a.createElement(b.a,{text:P["post.delete.confirm"],close:Be,action:function(t){Object(x.a)({text:"submitDeletePost:",emph:t,type:"positive"}),"secondary"===t&&(e.deletePost(d._id),e.setModule(e.prevModule))},direction:k}):null;Xe=$?o.a.createElement(f.a,{disabled:!0,close:De},o.a.createElement(b.e,{label:P["newreply.label"],value:d.reply.text,placeholder:P["newreply.placeholder"],action:Fe,direction:k,submit:Ke,submitText:P["login.button.submit"]})):null;var nt=pe?o.a.createElement("div",null,o.a.createElement(b.a,{text:P["post.update.confirm"],close:He,action:Ke,direction:k})):null,at=oe?o.a.createElement("div",{className:_.a.deleteButton},o.a.createElement(w.a,{mode:"attention",onClick:Be},P["post.delete.button"])):null,ot=Le||Se?{right:{icon:Object(u.i)(Se?"secondary":"primary"),action:Se?Ae:function(){ce(!oe)},noRtl:!0}}:null;(oe||be)&&(ot={right:{icon:Object(u.g)(be?"secondary":"primary"),action:be?Ae:He,noRtl:!0}});var ct=Object(c.a)({name:ke.name[p.settings.language]},ot,{left:{icon:Object(u.f)(Se?"secondary":"primary"),action:function(){e.showPost(Object(c.a)({show:!1},O.c)),e.setModule(e.prevModule)}}}),lt=Object(J.a)(d.link,e.news);return o.a.createElement(y.a,null,o.a.createElement(h.a,ct),o.a.createElement(C.a,{space:7}),o.a.createElement(v.a,null,o.a.createElement(B.a,{direction:k,padding:"0 1rem"},o.a.createElement(H.a,{direction:k,justify:"space-between"},o.a.createElement(N.a,null,Re),d.reply.text?o.a.createElement(T,{back:L.o},Object(u.f)("white")):null),o.a.createElement(A.a,{direction:k,padding:"0 1rem;"},d.title),o.a.createElement(b.g,{date:d.createdAt,daysText:Je,direction:k,votes:d.votes.length,voterText:Ne})),o.a.createElement(b.h,{direction:k,src:d.photo,edit:oe,actions:{set:function(t){e.showPost({photo:t})},remove:function(){e.showPost({photo:""})}},editText:{message:P["post.photo.edit"].message,confirm:P["post.photo.edit"].confirm,cancel:P["post.photo.edit"].cancel,label:P["new.field.photo.prompt"],placeholder:""}}),o.a.createElement(b.b,{primary:!0,text:lt,direction:k,edit:oe,actions:{set:function(t){e.showPost({link:t})},remove:function(){e.showPost({link:""})}},newsClick:function(){var t=d.link.split(":"),n=e.news.filter(function(e){return e._id===t[1]});e.showPost(Object(c.a)({show:!0,type:"news"},n[0]))},editText:{message:P["post.link.edit"],confirm:P.confirm,cancel:P.cancel,label:P["new.field.link.label"],placeholder:P["new.field.link.prompt"]}}),o.a.createElement("div",{className:Pe},o.a.createElement(g.a,{step:!0,title:P["post.problem"],text:d.problem,direction:k}),d.solution?o.a.createElement(g.a,{back:!0,title:P["post.solution"],text:d.solution,direction:k}):null),o.a.createElement(H.a,{direction:k,justify:"space-between"},We?Ie():null,o.a.createElement(b.j,{color:"primary",title:Te,direction:k,opened:U,action:F}))),We?null:Ie(),o.a.createElement(C.a,{space:3}),Ve,Ze,Xe,Qe,d.reply.text?Ye:null,at,tt,nt,o.a.createElement(C.a,{space:5}))}),W=n(162),X=n.n(W),I=function(e){var t=X.a.block;return e.border?t=X.a.border:e.rectangle&&(t=X.a.borderRectangle),o.a.createElement("div",{className:t},e.children)},Q=Object(i.b)(function(e){return{auth:e.auth,language:e.language,locations:e.locations,prevModule:e.prevModule,post:e.post,news:e.news}},{setModule:d.k,getNews:p.f,updateNews:p.l,showPost:p.j,deleteNews:p.d})(function(e){var t=e.language,n=t.direction,l=t.text,i=e.auth.user,s=e.locations.filter(function(e){return e._id===i.location})[0],d=e.news.filter(function(t){return t._id===e.post._id})[0],p=Object(a.useState)(!1),m=Object(r.a)(p,2),f=m[0],E=m[1],_=Object(a.useState)(!1),j=Object(r.a)(_,2),x=j[0],k=j[1],P=Object(a.useState)(!1),N=Object(r.a)(P,2),R=N[0],T=N[1],L="muni"===i.type,S=function(){E(!f)},M=function(){k(!x)},D=function(){e.showPost(Object(c.a)({show:!1},O.c)),e.setModule(e.prevModule)},q=R?o.a.createElement(H.a,{direction:n,justify:"center",width:"100%",padding:"2rem 0"},o.a.createElement(w.a,{mode:"attention",onClick:S},l["post.delete.button"])):null,U=x?o.a.createElement("div",null,o.a.createElement(b.a,{text:l["post.update.confirm"],close:M,action:function(t){"attention"===t?e.showPost(d):e.updateNews(e.post),T(!1),k(!1)},direction:n})):null,F=f?o.a.createElement(b.a,{text:l["post.delete.confirm"],close:S,action:function(t){"primary"===t&&(e.deleteNews(e.post._id),D())},direction:n}):null,K=l["post.age"],z=L?{right:{icon:Object(u.i)("secondary"),action:function(){T(!R)},noRtl:!0}}:null;R&&(z={right:{icon:Object(u.g)("secondary"),action:M,noRtl:!0}});var J=Object(c.a)({name:s.name[i.settings.language]},z,{left:{icon:Object(u.f)(L?"secondary":"primary"),action:D}});return o.a.createElement(y.a,null,o.a.createElement(h.a,J),o.a.createElement(C.a,{space:7}),o.a.createElement(v.a,null,o.a.createElement(B.a,{direction:n,padding:"0 1rem"},o.a.createElement(C.a,{space:1}),o.a.createElement(A.a,{direction:n,padding:"0 1rem;"},e.post.title),o.a.createElement(b.g,{date:e.post.createdAt,daysText:K,direction:n})),o.a.createElement(b.h,{src:e.post.photo,edit:R,actions:{set:function(t){e.showPost({photo:t})},remove:function(){e.showPost({photo:""})}}}),o.a.createElement(I,null,o.a.createElement(b.b,{primary:!0,text:e.post.link,direction:n,edit:R,actions:{set:function(t){e.showPost({link:t})},remove:function(){e.showPost({link:""})}},editText:{message:l["post.link.edit"],confirm:l.confirm,cancel:l.cancel,label:l["new.field.link.label"],placeholder:l["new.field.link.prompt"]}})),o.a.createElement(g.a,{muni:!0,text:e.post.text,direction:n,edit:R,action:function(t){e.showPost({text:t})}})),q,F,U)}),Y=n(105);t.default=function(e){return o.a.createElement(Y.a,null,e.news?o.a.createElement(Q,null):o.a.createElement(V,null))}}}]);
//# sourceMappingURL=9.64eca16a.chunk.js.map