(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{107:function(e,t,n){"use strict";var a=n(3),o=n(4),c=n(1),r=n(10);function l(){var e=Object(a.a)(["\ncolor: ","\nfont: ","\n"]);return l=function(){return e},e}var i=o.a.h1(l(),function(e){return e.muni?c.n:c.i},r.a);t.a=i},108:function(e,t,n){"use strict";var a=n(3),o=n(4),c=n(6),r=n(22);function l(){var e=Object(a.a)(["\n  margin: 1.5rem auto;\n  width: 90%;\n  border-radius: ",";\n  box-shadow: ",";\n  transition: ",";\n"]);return l=function(){return e},e}var i=o.a.article(l(),c.l,c.i,r.c);t.a=i},109:function(e,t,n){"use strict";var a=n(0),o=n.n(a),c=n(13),r=n(8),l=n(39),i=n(31),s=n(26),u=n(111),d=n.n(u),p=Object(c.b)(function(e){return{language:e.language,type:e.type}},{})(function(e){var t=e.language,n=t.direction,a=t.text,c=d.a[Object(l.a)("header",n)],r=d.a[Object(l.a)("headerDesc",n)],u=d.a[Object(l.a)("title",n)];return o.a.createElement("div",{className:d.a.content},o.a.createElement("section",{className:c},o.a.createElement(i.a,{mode:"minimal",onClick:e.cancel},Object(s.j)("white")),o.a.createElement("div",{className:u},a["help.mycity"]),o.a.createElement(i.a,{mode:"minimal"})),o.a.createElement("section",{className:r},o.a.createElement("div",null,a["help.button.help"])),o.a.createElement("section",{className:d.a.pinned},o.a.createElement("div",null,a["help.post.pinned"])),o.a.createElement("section",{className:d.a.card},o.a.createElement("div",{className:d.a.photo},a["help.post.photo"]),o.a.createElement("div",{className:d.a.category},a["help.post.category"]),o.a.createElement("div",{className:d.a.title},a["help.post.title"]),o.a.createElement("div",{className:d.a.lineThree},a["help.post.age"])),o.a.createElement("section",null,o.a.createElement("div",{className:d.a.voteButtonText},a["muni"===e.type?"help.new.muni":"help.new"])),o.a.createElement("section",null,o.a.createElement("div",{className:d.a.navLeft},a["help.navigation"]),o.a.createElement("div",{className:d.a.navRight},a["help.navigation"])))}),m=Object(c.b)(function(e){return{module:e.module,language:e.language,help:e.help}},{showHelp:r.m})(function(e){var t=e.language.direction,n=Object(l.a)("help-content",t),a=function(){e.showHelp(!e.help)},c=o.a.createElement("div",{className:n});switch(e.module){case"post":break;case"home":c=o.a.createElement(p,{cancel:a})}return o.a.createElement("div",{onClick:function(){return a()},className:"help"},c)}),h=n(107),f=n(3),b=n(4);function g(){var e=Object(f.a)(["\n  height: 65%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transform: ",";\n"]);return g=function(){return e},e}var v=b.a.div(g(),function(e){return e.rtl?"none":"rotate(180deg)"}),y=n(1);function E(){var e=Object(f.a)(["\ndirection:",";\n  width: 100%;\n  height: 5rem;\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ",";\n  z-index: 50;\n"]);return E=function(){return e},e}var j=b.a.header(E(),function(e){return e.direction},y.s);t.a=Object(c.b)(function(e){return{direction:e.language.direction,user:e.auth.user,help:e.help,module:e.module}},{showHelp:r.m})(function(e){var t=e.name,n=e.user,c=e.module;Object(a.useEffect)(function(){n.settings.help&&e.showHelp(!0)},[]);var r=e.left?o.a.createElement(v,{rtl:!!e.left.noRtl&&e.left.noRtl},e.left.icon):"home"===c?o.a.createElement(v,{rtl:!0},Object(s.j)("muni"===e.user.type?"secondary":"primary")):null;return o.a.createElement(j,{direction:e.direction},o.a.createElement(i.a,{mode:"minimal",onClick:function(){e.left?e.left.action():"home"===c&&e.showHelp(!e.help)}},r),o.a.createElement(h.a,{muni:"muni"===e.user.type},t),o.a.createElement(i.a,{mode:"minimal",onClick:function(){e.right&&e.right.action()}},e.right?o.a.createElement(v,{rtl:!!e.right.noRtl&&e.right.noRtl},e.right.icon):null),e.help?o.a.createElement(m,null):null)})},111:function(e,t,n){e.exports={content:"style_content__2T40g",central:"style_central__ADLjj",header:"style_header__tQ9Sx",headerRTL:"style_headerRTL__2kFRT",icon:"style_icon__1YFTz",iconRTL:"style_iconRTL__3HH5-",title:"style_title__1WHmK",titleRTL:"style_titleRTL__vpycB",headerDesc:"style_headerDesc__3ANCb",headerDescRTL:"style_headerDescRTL__3knRN",pinned:"style_pinned__Kl-fS",card:"style_card__1D5C-",photo:"style_photo__2fnix",category:"style_category__24IMX",lineThree:"style_lineThree__NkwpN",voteButtonText:"style_voteButtonText__2_n0m",navLeft:"style_navLeft__bzWVA",navRight:"style_navRight__k7-Uq"}},120:function(e,t,n){"use strict";var a=n(0),o=n.n(a),c=n(3),r=n(4),l=n(1),i=n(6),s=n(10),u=n(22);function d(){var e=Object(c.a)(["\n  width: 100%;\n  text-align: center;\n  user-select: none;\n  font: ",";\n  color: ",";\n"]);return d=function(){return e},e}function p(){var e=Object(c.a)(["\n  box-shadow: ",";\n  width: 6.5rem;\n  height: 6.5rem;\n  border-radius: 50%;\n  background-color: ",";\n  border: "," !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: ",";\n  transition: ",";\n  &:active {\n    transform: scale(0.95);\n  }\n"]);return p=function(){return e},e}var m=r.a.button(p(),Object(i.h)(l.j),l.i,i.e,u.b,u.c),h=r.a.div(d(),s.f,l.s);t.a=function(e){return o.a.createElement(m,null,o.a.createElement(h,null,e.title))}},128:function(e,t,n){"use strict";var a=n(3),o=n(4),c=n(1);function r(){var e=Object(a.a)(["\n  background-color: ",";\n  padding: ",";\n"]);return r=function(){return e},e}var l=o.a.div(r(),c.s,function(e){return e.padding?e.padding:0});t.a=l},162:function(e,t,n){e.exports={block:"Block_block__25D3U",border:"Block_border__3jZ4R",borderRectangle:"Block_borderRectangle__bDkgw"}},174:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(11),r=n(52),l=n(21),i=n(13),s=n(116),u=n(26),d=n(8),p=n(15),m=n(120),h=n(109),f=n(130),b=n(129),g=n(124),v=n(136),y=n(128),E=n(144),j=n.n(E),w=n(39),_=n(31),O=n(12),x=n(7),k=n(3),P=n(4),N=n(113);function R(){var e=Object(k.a)(["\n  height: 2.5rem;\n  width: 1.5rem;\n  padding: .5rem 1rem .5rem .8rem;\n  transform: rotate(270deg);\n"]);return R=function(){return e},e}var T=Object(P.a)(N.a)(R()),C=n(114),S=n(1),M=n(10);function D(){var e=Object(k.a)(["\nwhite-space: nowrap;\npadding: 0.5rem 2rem;\ntext-align: center;\nmargin: 0 auto;\nbackground-color: white;\ncolor: ","\nfont: ","\n"]);return D=function(){return e},e}var L=P.a.div(D(),S.i,M.l),B=n(33),H=n(40),A=n(106),z=n(51),F=n(108);function U(){var e=Object(k.a)(["\n  background-color: ",";\n  width:90%;\n  margin: 0 auto;\n"]);return U=function(){return e},e}var q=Object(P.a)(F.a)(U(),function(e){return e.color?e.color:"white"}),J=n(127),K=n(145),V=Object(i.b)(function(e){return{language:e.language,locations:e.locations,posts:e.posts,news:e.news,post:e.post,mode:e.mode,prevModule:e.prevModule,token:e.token,auth:e.auth,categories:e.categories}},{vote:d.o,updatePost:p.m,setModule:d.k,fetchData:d.b,getPosts:p.g,deletePost:p.e,showPost:p.j,votePost:p.n})(function(e){var t=e.categories,n=e.auth,i=e.locations,d=e.post,p=n.user,E=e.language,k=E.direction,P=E.text,R=E.short,M=Object(a.useState)(!1),D=Object(l.a)(M,2),F=D[0],U=D[1],V=Object(a.useState)(!1),W=Object(l.a)(V,2),I=(W[0],W[1],Object(a.useState)(!1)),Q=Object(l.a)(I,2),X=Q[0],Y=Q[1],Z=Object(a.useState)(!1),G=Object(l.a)(Z,2),$=G[0],ee=G[1],te=(o.a.createRef(),e.posts.filter(function(t){return t._id===e.post._id})[0]),ne=Object(a.useState)(!1),ae=Object(l.a)(ne,2),oe=ae[0],ce=ae[1],re=Object(a.useState)(!1),le=Object(l.a)(re,2),ie=le[0],se=le[1],ue=Object(a.useState)(!1),de=Object(l.a)(ue,2),pe=de[0],me=de[1],he=Object(a.useState)(!1),fe=Object(l.a)(he,2),be=fe[0],ge=fe[1],ve=Object(a.useState)(!1),ye=Object(l.a)(ve,2),Ee=ye[0],je=ye[1],we=Object(a.useState)(!1),_e=Object(l.a)(we,2),Oe=_e[0],xe=_e[1],ke=i.filter(function(e){return e._id===p.location})[0],Pe=F?j.a.text:j.a.textClosed,Ne=1===d.votes.length?P["post.voter"]:P["post.voters"],Re=Object(s.a)(t,R,d.category),Te={more:P["post.show-more"],less:P["post.show-less"]},Ce=d.votes.includes(e.auth.user._id),Se=d.createdBy===e.auth.user._id,Me="muni"===n.user.type;Object(a.useEffect)(function(){console.log("posts changed"),e.showPost(e.posts.filter(function(t){return t._id===e.post._id})[0])},[e.posts]);var De=!1;d.reply.up||d.reply.down?d.reply.up.length>0&&d.reply.down.length>0?De=[].concat(Object(r.a)(d.reply.up),Object(r.a)(d.reply.down)).includes(e.auth.user._id):d.reply.up.length>0?De=d.reply.up.includes(e.auth.user._id):d.reply.down.length>0&&(De=d.reply.down.includes(e.auth.user._id)):De=!0;var Le=function(){ee(!$)},Be=function(){me(!pe)},He=function(){se(!ie)},Ae=function(){ge(!be)},ze=function(){je(!Ee)},Fe=function(){xe(!Oe)},Ue=function(t){e.showPost({reply:{text:t.target.value}})},qe=function(t){Object(x.a)({text:"submitUpdatePost:",emph:t||"",type:"positive"}),xe(!1),ge(!1),ee(!1),t?(ce(!1),me(!1),"attention"===t?e.showPost(te):e.updatePost(d)):e.updatePost(d)},Je=function(t){console.log("object"),Object(x.a)({text:"handleReplyVoting:",emph:t.toString(),type:"positive"});var n=d.reply.up,a=d.reply.down;t?n.push(e.auth.user._id):a.push(e.auth.user._id);var o=Object(c.a)({},d.reply,{reply:Object(c.a)({},d.reply,{up:n,down:a})}),r=Object(c.a)({},d,{reply:o});e.showPost(r),e.updatePost(Object(c.a)({},d,{reply:o}))},Ke=P["post.age"],Ve=X?o.a.createElement(b.d,{close:function(){Y(!X)},text:P["vote.thanks"]}):null,We=d.votes.includes(e.auth.user._id);console.log("voted ",We);var Ie,Qe=function(){return We?o.a.createElement(L,null,P["post.voted"]):Ce||Se||Me?void 0:o.a.createElement("div",{className:j.a.voteButton,onClick:function(){return Y(!0),setTimeout(function(){Y(!1)},2e3),e.showPost(Object(c.a)({},d,{votes:[d.votes,p._id]})),void e.votePost(d._id)}},o.a.createElement(m.a,{title:P["card.button.vote"]}))},Xe="",Ye="",Ze=Me&&!d.reply.text?o.a.createElement(b.f,{action:Le,text:P["post.muni.newreply"]}):null;if(d.reply){d.reply.text&&!De?Ye=o.a.createElement("div",{className:j.a[Object(w.a)("thumbsContainer",k)]},o.a.createElement("div",{onClick:function(e){return Je(!0)}},Object(u.f)("white")),o.a.createElement("div",{onClick:function(e){return Je(!1)}},Object(u.f)("white"))):De&&(Ye="");var Ge=null,$e=null,et=null;Me&&(Ge=be?o.a.createElement(B.a,{id:"reply__edit-delete_buttons-wrapper",direction:k,justify:"space-around",padding:"0 0 2rem 0",width:"100%"},o.a.createElement(_.a,{mode:"secondary",onClick:Fe},P["muni-reply.edit"]),o.a.createElement(_.a,{mode:"attention",onClickMessage:ze},P["muni-reply.delete"])):null,$e=Ee?o.a.createElement(b.c,{direction:k,close:ze,action:function(t){if(Object(x.a)({text:"submitDeletePost:",emph:t,type:"positive"}),"primary"===t){var n=Object(c.a)({},d,{reply:{}});e.showPost(n),e.updatePost(n)}ge(!1)},text:P["muni-reply.delete.text"]}):null,et=Oe?o.a.createElement(b.c,{direction:k,close:Fe,action:qe,text:P["muni-reply.edit.text"]},o.a.createElement("div",{className:"section"},o.a.createElement(z.a,{direction:k,autoFocus:!0,type:"text",name:"reply",value:d.reply.text,onChange:function(e){return Ue(e)},placeholder:P["muni.post.prompt.text"],required:!0}))):null),Xe=d.reply.text?o.a.createElement(q,null,o.a.createElement(B.a,{padding:"1rem 1rem 0 1rem",direction:k,justify:"space-between"},o.a.createElement(A.a,{direction:k},P["munireply.title"]),o.a.createElement(b.i,{replies:{up:d.reply.up,down:d.reply.down},direction:k})),o.a.createElement(H.a,{direction:k},o.a.createElement(J.a,{direction:k},d.reply.text),o.a.createElement(C.a,{space:1})),Ge,$e,et):null,Me&&(Ye=null)}var tt=ie?o.a.createElement(b.a,{text:P["post.delete.confirm"],close:He,action:function(t){Object(x.a)({text:"submitDeletePost:",emph:t,type:"positive"}),"secondary"===t&&(e.deletePost(d._id),e.setModule(e.prevModule))},direction:k}):null;Ie=$?o.a.createElement(f.a,{disabled:!0,close:Le},o.a.createElement(b.e,{label:P["newreply.label"],value:d.reply.text,placeholder:P["newreply.placeholder"],action:Ue,direction:k,submit:qe,submitText:P["login.button.submit"]})):null;var nt=pe?o.a.createElement("div",null,o.a.createElement(b.a,{text:P["post.update.confirm"],close:Be,action:qe,direction:k})):null,at=oe?o.a.createElement("div",{className:j.a.deleteButton},o.a.createElement(_.a,{mode:"attention",onClick:He},P["post.delete.button"])):null,ot=Se||Me?{right:{icon:Object(u.i)(Me?"secondary":"primary"),action:Me?Ae:function(){ce(!oe)},noRtl:!0}}:null;(oe||be)&&(ot={right:{icon:Object(u.g)(be?"secondary":"primary"),action:be?Ae:Be,noRtl:!0}});var ct=Object(c.a)({name:ke.name[p.settings.language]},ot,{left:{icon:Object(u.f)(Me?"secondary":"primary"),action:function(){e.showPost(Object(c.a)({show:!1},O.c)),e.setModule(e.prevModule)}}}),rt=Object(K.a)(d.link,e.news);return o.a.createElement(y.a,null,o.a.createElement(h.a,ct),o.a.createElement(C.a,{space:7}),o.a.createElement(v.a,null,o.a.createElement(H.a,{direction:k,padding:"0 1rem"},o.a.createElement(B.a,{direction:k,justify:"space-between"},o.a.createElement(N.a,null,Re),d.reply.text?o.a.createElement(T,{back:S.p},Object(u.f)("white")):null),o.a.createElement(A.a,{direction:k,padding:"0 1rem;"},d.title),o.a.createElement(b.g,{date:d.createdAt,daysText:Ke,direction:k,votes:d.votes.length,voterText:Ne})),o.a.createElement(b.h,{direction:k,src:d.photo,edit:oe,actions:{set:function(t){e.showPost({photo:t})},remove:function(){e.showPost({photo:""})}},editText:{message:P["post.photo.edit"].message,confirm:P["post.photo.edit"].confirm,cancel:P["post.photo.edit"].cancel,label:P["new.field.photo.prompt"],placeholder:""}}),o.a.createElement(b.b,{primary:!0,text:rt,direction:k,edit:oe,actions:{set:function(t){e.showPost({link:t})},remove:function(){e.showPost({link:""})}},newsClick:function(){var t=d.link.split(":"),n=e.news.filter(function(e){return e._id===t[1]});e.showPost(Object(c.a)({show:!0,type:"news"},n[0]))},editText:{message:P["post.link.edit"],confirm:P.confirm,cancel:P.cancel,label:P["new.field.link.label"],placeholder:P["new.field.link.prompt"]}}),o.a.createElement("div",{className:Pe},o.a.createElement(g.a,{step:!0,title:P["post.problem"],text:d.problem,direction:k}),d.solution?o.a.createElement(g.a,{back:!0,title:P["post.solution"],text:d.solution,direction:k}):null),o.a.createElement(B.a,{direction:k,justify:"space-between"},We?Qe():null,o.a.createElement(b.j,{color:"primary",title:Te,direction:k,opened:F,action:U}))),We?null:Qe(),o.a.createElement(C.a,{space:3}),Ve,Ze,Ie,Xe,d.reply.text?Ye:null,at,tt,nt,o.a.createElement(C.a,{space:5}))}),W=n(162),I=n.n(W),Q=function(e){var t=I.a.block;return e.border?t=I.a.border:e.rectangle&&(t=I.a.borderRectangle),o.a.createElement("div",{className:t},e.children)},X=Object(i.b)(function(e){return{auth:e.auth,language:e.language,locations:e.locations,prevModule:e.prevModule,post:e.post,news:e.news}},{setModule:d.k,getNews:p.f,updateNews:p.l,showPost:p.j,deleteNews:p.d})(function(e){var t=e.language,n=t.direction,r=t.text,i=e.auth.user,s=e.locations.filter(function(e){return e._id===i.location})[0],d=e.news.filter(function(t){return t._id===e.post._id})[0],p=Object(a.useState)(!1),m=Object(l.a)(p,2),f=m[0],E=m[1],j=Object(a.useState)(!1),w=Object(l.a)(j,2),x=w[0],k=w[1],P=Object(a.useState)(!1),N=Object(l.a)(P,2),R=N[0],T=N[1],S="muni"===i.type,M=function(){E(!f)},D=function(){k(!x)},L=function(){e.showPost(Object(c.a)({show:!1},O.c)),e.setModule(e.prevModule)},z=R?o.a.createElement(B.a,{direction:n,justify:"center",width:"100%",padding:"2rem 0"},o.a.createElement(_.a,{mode:"attention",onClick:M},r["post.delete.button"])):null,F=x?o.a.createElement("div",null,o.a.createElement(b.a,{text:r["post.update.confirm"],close:D,action:function(t){"attention"===t?e.showPost(d):e.updateNews(e.post),T(!1),k(!1)},direction:n})):null,U=f?o.a.createElement(b.a,{text:r["post.delete.confirm"],close:M,action:function(t){"primary"===t&&(e.deleteNews(e.post._id),L())},direction:n}):null,q=r["post.age"],J=S?{right:{icon:Object(u.i)("secondary"),action:function(){T(!R)},noRtl:!0}}:null;R&&(J={right:{icon:Object(u.g)("secondary"),action:D,noRtl:!0}});var K=Object(c.a)({name:s.name[i.settings.language]},J,{left:{icon:Object(u.f)(S?"secondary":"primary"),action:L}});return o.a.createElement(y.a,null,o.a.createElement(h.a,K),o.a.createElement(C.a,{space:7}),o.a.createElement(v.a,null,o.a.createElement(H.a,{direction:n,padding:"0 1rem"},o.a.createElement(C.a,{space:1}),o.a.createElement(A.a,{direction:n,padding:"0 1rem;"},e.post.title),o.a.createElement(b.g,{date:e.post.createdAt,daysText:q,direction:n})),o.a.createElement(b.h,{src:e.post.photo,edit:R,actions:{set:function(t){e.showPost({photo:t})},remove:function(){e.showPost({photo:""})}}}),o.a.createElement(Q,null,o.a.createElement(b.b,{primary:!0,text:e.post.link,direction:n,edit:R,actions:{set:function(t){e.showPost({link:t})},remove:function(){e.showPost({link:""})}},editText:{message:r["post.link.edit"],confirm:r.confirm,cancel:r.cancel,label:r["new.field.link.label"],placeholder:r["new.field.link.prompt"]}})),o.a.createElement(g.a,{muni:!0,text:e.post.text,direction:n,edit:R,action:function(t){e.showPost({text:t})}})),z,U,F)}),Y=n(105);t.default=function(e){return o.a.createElement(Y.a,null,e.news?o.a.createElement(X,null):o.a.createElement(V,null))}}}]);
//# sourceMappingURL=9.9c104a7f.chunk.js.map